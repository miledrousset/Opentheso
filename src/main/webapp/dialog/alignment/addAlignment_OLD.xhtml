<ui:fragment xmlns="http://www.w3.org/1999/xhtml"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <p:dialog id="idAddAlignment" header="#{langueBean.getMsg('rightbody.conceptdialog.alignment_with_external_thesauri')}" widgetVar="addAlignment" 
              modal="true" resizable="true" position="top" closable="false" width="1100" style="margin-top: 50px" >

        <!-- barre de control -->
        <div class="row">
            <p:menubar style="width: 100%">
                <p:submenu label="Filter" icon="pi pi-fw pi-filter">
                    <p:menuitem value="#{alignmentBean.withLang}" icon="pi pi-fw pi-trash"/>
                    <p:menuitem value="#{alignmentBean.withNote}" icon="pi pi-fw pi-trash"/>
                    <p:menuitem value="#{alignmentBean.withImage}" icon="pi pi-fw pi-external-link"/>
                </p:submenu>             

                <p:submenu label="Filter" icon="fas fa-cog" rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}">
                    <p:menuitem value="#{langueBean.getMsg('rightbody.conceptdialog.manage_alignment_sources')}" icon="pi pi-fw pi-trash"
                                action="#{setAlignmentSourceBean.init()}" update="idAddAlignment"/>

                    <p:menuitem value="#{langueBean.getMsg('rightbody.conceptdialog.add_source')}"
                                disabled="false"
                                action="#{setAlignmentSourceBean.initAddSource()}"
                                update="idAddAlignment"/>
                </p:submenu>

                <p:menuitem value="Quit" icon="pi pi-fw pi-power-off"/>                                             
            </p:menubar>
        </div>

        <div class="row">
            <!-- panel gauche -->
            <div class="col-3">
                <h:panelGroup id="columnLeftPanel" style="height: 620px; margin-top: -20px;  ">
                    <!-- ligne navigation dans les concepts -->
                    <div class="row">
                        <div class="col-4">
                            <p:commandLink value="#{langueBean.getMsg('rightbody.conceptdialog.reset')}"
                                           id="reset" 
                                           action="#{alignmentBean.restart(conceptView.selectedLang,  selectedTheso.currentIdTheso)}"
                                           styleClass="styleButton_db"
                                           update="columnLeftPanel">
                                <i class="fas fa-step-backward" style="color: #f47b2a" />
                            </p:commandLink>
                        </div>
                        <div class="col-4">                
                            <p:commandLink value="#{langueBean.getMsg('rightbody.conceptdialog.previous')}" id="previous"
                                           action="#{alignmentBean.previousTen(conceptView.selectedLang,  selectedTheso.currentIdTheso)}" 
                                           styleClass="styleButton_db"
                                           update="columnLeftPanel">
                                <i class="fas fa-arrow-circle-left" style="color: #43B572" />
                            </p:commandLink>
                        </div>
                        <div class="col-4">
                            <p:commandLink value="#{langueBean.getMsg('rightbody.conceptdialog.next')}"
                                           action="#{alignmentBean.nextTen(conceptView.selectedLang,  selectedTheso.currentIdTheso)}"
                                           styleClass="styleButton_db"
                                           update="columnLeftPanel">
                                <i class="fas fa-arrow-circle-right" style="color: #43B572" />
                            </p:commandLink>
                        </div>
                    </div>

                    <!-- ligne liste des concepts -->
                    <div class="row">
                        <div class="col-12">
                            <p:panel style="margin-top: 10px; margin-left: -10px; margin-right: -10px; height: 570px; overflow-y:scroll">
                                <ui:repeat var="conceptList" value="#{alignmentBean.idsAndValues}">
                                    <div class="row">
                                        <div class="col-11">
                                            <p:commandLink value="#{conceptList.value}"
                                                           actionListener="#{alignmentBean.selectConceptForAlignment(conceptList.id)}"
                                                           update=""/>
                                        </div>
                                    </div>
                                </ui:repeat>
                            </p:panel>
                        </div>
                    </div>
                </h:panelGroup>
            </div>

            <!-- panel droit -->
            <p:panel id="columnRightPanel" rendered="#{!alignmentBean.viewSetting and !alignmentBean.viewAddNewSource}">
                <div class="col-9" >
                    <div class="row">
                        <!-- thesaurus distant -->
                        <div class="col-6" id="columnRightPanelSource">
                            <p:panel style="height: 620px; margin-top: -20px; margin-left: -20px">
                                <h:panelGroup rendered="#{!alignmentBean.isViewSelection}">
                                    <div class="row">
                                        <h:panelGroup rendered="#{!alignmentBean.isNameAlignment}" >
                                            <div class="col-5" style="font-size: 12px; margin-top: -5px">
                                                <p:inputText value="#{alignmentBean.conceptValueForAlignment}"
                                                             style="height: 25px; border-color: #43B572" />
                                            </div>
                                        </h:panelGroup>

                                        <!-- nom et prénom pour IdRef -->
                                        <h:panelGroup rendered="#{alignmentBean.isNameAlignment}" >
                                            <div class="col-3" style="font-size: 12px; margin-top: -5px" >
                                                <p:inputText placeholder="#{langueBean.getMsg('rightbody.conceptdialog.name')}"
                                                             value="#{alignmentBean.nom}" 
                                                             style="height: 25px; border-color: #43B572"/>
                                            </div>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{alignmentBean.isNameAlignment}" >
                                            <div class="col-3" style="font-size: 12px; margin-top: -5px">
                                                <p:inputText placeholder="#{langueBean.getMsg('rightbody.conceptdialog.first_name')}"
                                                             value="#{alignmentBean.prenom}" 
                                                             style="height: 25px; border-color: #43B572"/>
                                            </div>
                                        </h:panelGroup>

                                        <div class="col-4" style="font-size: 12px; margin-top: -5px; ">
                                            <p:selectOneMenu id="console" value="#{alignmentBean.selectedAlignement}"
                                                             style="font-size: 12px; width: 100%; background: white; border-color: #43B572; height: 27px;"
                                                             title="#{alignmentBean.alertWikidata}"
                                                             panelStyle="font-size: 12px; background: red; border: none; box-shadow: none;">
                                                <f:selectItems  value="#{alignmentBean.alignementSources}" var="alig" itemLabel="#{alig.source}" itemValue="#{alig.source}"/>                                
                                                <p:ajax event="change" listener="#{alignmentBean.actionChoix()}"  update="columnRightPanel"/>
                                            </p:selectOneMenu>                                
                                        </div>

                                        <div class="col-1" style="font-size: 12px;">
                                            <p:commandLink id="cbAjAlignAuto"
                                                           action="#{alignmentBean.searchAlignments(
                                                                     selectedTheso.selectedIdTheso, 
                                                                     alignmentBean.idConceptSelectedForAlignment,
                                                                     alignmentBean.conceptValueForAlignment,
                                                                     conceptView.selectedLang)}"
                                                           update="columnRightPanel"
                                                           styleClass="styleButton_db" >
                                                <i class="pi pi-search" style="color: #f47b2a;"/>
                                            </p:commandLink>
                                        </div> 
                                        <div class="col-1">
                                            <i class="pi pi-sort-alt" style="font-size: 14px; color: #f47b2a"/>
                                            <!--<b:iconAwesome value="fa-exchange" style="font-size: 14px; color: #f47b2a"
                                                           tooltip="Aligner avec ->" tooltip-delay-show="1000"/>-->
                                        </div>
                                    </div>

                                    <!-- panel de résultat -->
                                    <div class="row" id="columnRightPanelResult">
                                        <h:panelGroup rendered="#{alignmentBean.isViewResult}">
                                            <div class="col-12">
                                                <p:panel style="margin-top: -10px; margin-left: -10px; margin-right: -10px; height: 570px; overflow: scroll">

                                                    <!-- Ajout d'alignement manuel -->
                                                    <h:panelGroup rendered="#{(alignmentBean.listAlignValues.size() == 0)}">                                                   
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <!--<b:alert severity="warning" style="font-size: 12px"> <strong> Pas de résultat!</strong> aucun résultat trouvé pour ce label.
                                                                    <br/>
                                                                    Vous pouvez ajouter l'alignement manuellement ci-dessous :
                                                                </b:alert>-->
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="row">
                                                                    <div class="col-12" style="background: #FAFAFA">
                                                                        <p:inputText value="#{conceptView.nodeConcept.term.lexical_value}"
                                                                                     label="#{langueBean.getMsg('rightbody.conceptdialog.local_concept')}"
                                                                                     disabled="true"
                                                                                     style="color: #43B572; font-size: 12px;"/>                    
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-12" style="background: #FAFAFA">
                                                                        <p:selectOneMenu value="#{alignmentManualBean.manualAlignmentType}"  label="#{langueBean.getMsg('rightbody.conceptdialog.equivalence_type')}"
                                                                                         style="font-size: 12px; background: white; border-color: #43B572">
                                                                            <f:selectItems value="#{alignmentManualBean.nodeAlignmentTypes}" var="types"
                                                                                           itemLabel="#{types.label} (#{types.labelSkos})" itemValue="#{types.id}"/>
                                                                        </p:selectOneMenu>  
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-12" style="background: #FAFAFA">
                                                                        <p:inputText value="#{alignmentManualBean.manualAlignmentUri}"
                                                                                     label="#{langueBean.getMsg('rightbody.conceptdialog.distant_uri')}" 
                                                                                     style="color: #43B572; font-size: 12px;"/>                    
                                                                    </div>
                                                                </div>
                                                                <div class="row">            
                                                                    <div class="col-12" style="background: #FAFAFA">
                                                                        <p:inputText value="#{alignmentManualBean.manualAlignmentSource}"
                                                                                     label="#{langueBean.getMsg('rightbody.conceptdialog.source_name')}" 
                                                                                     disabled="true"
                                                                                     style="color: #43B572; font-size: 12px;"/>                    
                                                                    </div>
                                                                </div>     


                                                                <div class="row" style="margin-bottom: 10px;">
                                                                    <div class="col-4" >
                                                                        <p:commandButton id="buttonCancelManual" value="#{langueBean.getMsg('btnCancel')}" 
                                                                                         style="width:100%; font-size: 13px; 
                                                                                         font-weight: normal;
                                                                                         color: white; background: #8C8C8C; border: none; box-shadow: none;"
                                                                                         class="btn btn-primary"
                                                                                         action="#{alignmentBean.cancelManualAlignment()}"
                                                                                         update="columnRightPanel"/>
                                                                    </div>                                                              
                                                                    <div class="col-4" >
                                                                        <p:commandButton id="buttonSubmitManual" value="#{langueBean.getMsg('btnValidate')}" 
                                                                                         style="width:100%; font-size: 13px; 
                                                                                         font-weight: normal;
                                                                                         color: white; background: #F7A269; border: none; box-shadow: none;"
                                                                                         class="btn btn-primary"
                                                                                         update="columnRightPanel"
                                                                                         actionListener="#{alignmentManualBean.addManualAlignement()}"
                                                                                         action="#{alignmentBean.validManualAlignment()}" />
                                                                    </div>                    
                                                                    <p:spacer height="20" />
                                                                </div> 
                                                            </div>                                                
                                                        </div>
                                                    </h:panelGroup>
                                                    <!-- Fin Ajout d'alignement manuel -->

                                                    <h:panelGroup rendered="#{alignmentBean.alignementSources == null || alignmentBean.alignementSources.size() == 0}">                                                   
                                                        <div class="row" id="alignementChoiceConfStep">
                                                            <div class="col-12">
                                                                <!--<b:alert severity="danger" style="font-size: 12px" value="#{langueBean.getMsg('alig.NeedToParameter')}"/>-->
                                                            </div>
                                                        </div>
                                                    </h:panelGroup>

                                                    <ui:repeat rendered="#{alignmentBean.listAlignValues != null}" value="#{alignmentBean.listAlignValues}" var='nodeAlign'>
                                                        <div class="row">
                                                            <div class="col-10">
                                                                <div class="row">
                                                                    <div class="col-12">
                                                                        <h:outputText value="#{nodeAlign.concept_target}: " style="font-weight: bold; font-size: 12px"/> 
                                                                    </div>
                                                                </div>
                                                                <h:panelGroup rendered="#{nodeAlign.concept_target_alt.trim() != null and nodeAlign.concept_target_alt.trim() != ''}"> 
                                                                    <div class="row">
                                                                        <div class="col-12" >
                                                                            <h:outputText value="#{langueBean.getMsg('indexview.synonym')} : #{nodeAlign.concept_target_alt}&lt;br/&gt;" escape="false" /> 
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <h:outputText value="#{nodeAlign.def_target}&lt;br/&gt;" escape="false" />
                                                                    </div>
                                                                </h:panelGroup>                                      
                                                                <div class="row">
                                                                    <div class="col-12">
                                                                        <h:outputLink value="#{nodeAlign.uri_target}" target="_blank" >
                                                                            <h:outputText value="#{nodeAlign.uri_target}" />
                                                                        </h:outputLink>
                                                                        <br/>
                                                                    </div>
                                                                </div>                                          
                                                            </div>

                                                            <div class="col-1">
                                                                <p:commandLink action="#{alignmentBean.getUriAndOptions(nodeAlign, selectedTheso.selectedIdTheso, conceptView.nodeConcept.concept.idConcept)}"
                                                                               update="columnRightPanel">
                                                                    <i class="pi pi-cloud-download" style="color: #f47b2a;"/>
                                                                </p:commandLink>
                                                            </div>
                                                        </div> 
                                                        <p:separator styleClass="separator" style="margin-top: 2px"/>
                                                    </ui:repeat>
                                                </p:panel>
                                            </div>
                                        </h:panelGroup>

                                        <!-- panel de validation d'un alignement avec les options-->
                                        <h:panelGroup rendered="#{alignmentBean.isViewSelection}">
                                            <div class="col-12">
                                                <p:panel style="margin-top: -15px; margin-left: -10px; margin-right: -10px; height: 610px; overflow: scroll; font-size: 12px;">
                                                    <div class="row">
                                                        <div class="col-3">
                                                            <h:outputText value="#{alignmentBean.conceptValueForAlignment}"  style="font-size: 12px; color: #43B572"/>
                                                        </div>
                                                        <div class="col-4">
                                                            <p:selectOneMenu id="alignmentType" value="#{alignmentBean.selectedAlignementType}"
                                                                             title="#{langueBean.getMsg('rightbody.conceptdialog.type_of_alignmnent')}"
                                                                             style="font-size: 12px; width: 100%; background: white; border-color: #43B572"
                                                                             panelStyle="font-size: 12px; background: none; border: none; box-shadow: none;">
                                                                <f:selectItems value="#{alignmentBean.alignmentTypes}" var="type" itemLabel="#{type.value}" itemValue="#{type.key}" />
                                                            </p:selectOneMenu>
                                                        </div>
                                                        <div class="col-3">
                                                            <h:outputText value=" #{alignmentBean.selectedNodeAlignment.concept_target} (#{alignmentBean.selectedAlignement})"
                                                                          title="#{alignmentBean.selectedNodeAlignment.uri_target}" style="font-size: 12px; color: #43B572"/>
                                                        </div>

                                                        <div class="col-1">
                                                            <p:commandLink actionListener="#{alignmentBean.addAlignment(
                                                                                             selectedTheso.selectedIdTheso, 
                                                                                             alignmentBean.idConceptSelectedForAlignment,
                                                                                             currentUser.nodeUser.idUser)}"
                                                                           update="columnRightPanel idConceptGps" >
                                                                <i class="pi pi-check-circle" style="color: #f47b2a;"/>
                                                            </p:commandLink>
                                                        </div>
                                                        <div class="col-1">
                                                            <p:commandLink id="#{langueBean.getMsg('btnCancel')}" action="#{alignmentBean.cancelAlignment()}" update="columnRightPanel">
                                                                <i class="pi pi-undo" style="color: #f47b2a;"/>
                                                            </p:commandLink>
                                                        </div>                                            
                                                    </div>
                                                    <p:separator styleClass="separator" style="margin-top: 2px"/>

                                                    <h:panelGroup id="listOptions" style="font-size: 12px;"> 

                                                        <!-- langues externes -->
                                                        <h:panelGroup rendered="#{(alignmentBean.traductionsOfAlignment != null) and (alignmentBean.traductionsOfAlignment.size() != 0)}">
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <h:outputText value="#{langueBean.getMsg('rightbody.conceptdialog.translations_of')} #{alignmentBean.selectedAlignement}" />
                                                                </div>
                                                            </div>
                                                        </h:panelGroup>

                                                        <ui:repeat rendered="#{(alignmentBean.traductionsOfAlignment != null) and (alignmentBean.traductionsOfAlignment.size() != 0)}"
                                                                   value="#{alignmentBean.traductionsOfAlignment}" var='externalTraductions'>
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <p:inputText value="#{externalTraductions.idLang}" disabled="true" style="height: 25px;"/>
                                                                </div>
                                                                <div class="col-4">
                                                                    <p:inputText value="#{externalTraductions.localValue}" disabled="true" style="height: 25px;"/>
                                                                </div>
                                                                <div class="col-4">
                                                                    <p:inputText value="#{externalTraductions.gettedValue}" style="height: 25px;"/>
                                                                </div>                                                            
                                                                <div class="col-1" >
                                                                    <p:selectBooleanCheckbox value="#{externalTraductions.selected}" />
                                                                </div>                                                                 
                                                            </div>
                                                        </ui:repeat>

                                                        <!-- Notes externes -->
                                                        <h:panelGroup rendered="#{(alignmentBean.descriptionsOfAlignment != null) and (alignmentBean.descriptionsOfAlignment.size() != 0)}">
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <h:outputText value="#{langueBean.getMsg('rightbody.conceptdialog.definition_of')} #{alignmentBean.selectedAlignement}" />
                                                                </div>
                                                            </div>
                                                        </h:panelGroup>

                                                        <ui:repeat rendered="#{(alignmentBean.descriptionsOfAlignment != null) and (alignmentBean.descriptionsOfAlignment.size() != 0)}"
                                                                   value="#{alignmentBean.descriptionsOfAlignment}" var='notes'>
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <p:inputText value="#{notes.idLang}" disabled="true" style="height: 25px;"/>
                                                                </div>
                                                                <div class="col-8">
                                                                    <p:inputTextarea value="#{notes.gettedValue}" style="height: 50px;"/>
                                                                </div>                                                            
                                                                <div class="col-1" >
                                                                    <p:selectBooleanCheckbox value="#{notes.selected}" />
                                                                </div>                                                                 
                                                            </div>
                                                        </ui:repeat> 


                                                        <!-- images externes -->
                                                        <h:panelGroup rendered="#{(alignmentBean.imagesOfAlignment != null) and (alignmentBean.imagesOfAlignment.size() != 0)}">
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <h:outputText value="#{langueBean.getMsg('rightbody.conceptdialog.images_of')} #{alignmentBean.selectedAlignement}"  />
                                                                </div>
                                                            </div>
                                                        </h:panelGroup>

                                                        <ui:repeat rendered="#{(alignmentBean.imagesOfAlignment != null) and (alignmentBean.imagesOfAlignment.size() != 0)}"
                                                                   value="#{alignmentBean.imagesOfAlignment}" var='images'>
                                                            <div class="row">
                                                                <div class="col-6">
                                                                    <p:inputText value="#{images.gettedValue}"  style="height: 25px;"/>
                                                                </div>
                                                                <div class="col-5">
                                                                    <p:graphicImage value="#{images.gettedValue}" style="height: 50px;"/>
                                                                </div>                                                            
                                                                <div class="col-1" >
                                                                    <p:selectBooleanCheckbox value="#{images.selected}" />
                                                                </div>                                                                 
                                                            </div>
                                                        </ui:repeat>                                                     

                                                    </h:panelGroup> 

                                                </p:panel>
                                            </div>
                                        </h:panelGroup>
                                    </div>
                                </h:panelGroup>
                            </p:panel>
                        </div>
                        <!-- fin pour thésaurus distant -->

                        <!-- thesaurus local -->
                        <div class="col-6" id="columnRightPanelLocal"> 
                            <p:panel style="height: 620px; margin-top: -20px; margin-left: -20px">
                                <div class="row">
                                    <div class="col-12">
                                        <h:outputText value="#{selectedTheso.thesoName} (#{selectedTheso.currentIdTheso})"/>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">                            
                                        <p:panel style="margin-top: 10px; margin-left: -10px; margin-right: -10px; height: 570px; overflow-y:scroll">
                                            <!-- alignements existants -->
                                            <h:panelGroup rendered="#{alignmentBean.existingAlignments.size() != 0}">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <ui:repeat var="align" value="#{alignmentBean.existingAlignments}" >
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <p:link href="#{align.uri_target}" value="#{align.uri_target}" target="_blank">
                                                                        <i class="pi pi-link" style="color: #43B572;" />
                                                                    </p:link>                            
                                                                </div> 
                                                            </div> 
                                                        </ui:repeat>
                                                        <p:separator styleClass="separator" style="margin-top: 2px"/>                
                                                    </div>
                                                </div>
                                            </h:panelGroup>
                                        </p:panel>
                                    </div>
                                </div>
                            </p:panel>
                        </div>
                    </div>
                    <!-- fin de panel thésaurus local -->
                </div>
            </p:panel>
            <!-- fin de panel droit -->

            <!-- Pour paramétrer les sources -->
            <h:panelGroup id="panelSetting" rendered="#{alignmentBean.viewSetting}">
                <div class="row">
                    <div class="col-6" >
                        <p:panel style="height: 620px; margin-top: -20px; margin-left: -20px">

                            <div class="row">
                                <div class="col-11">
                                    <h:outputText id="currentPrefLabel" value="#{selectedTheso.thesoName} (#{selectedTheso.currentIdTheso})"
                                                  style="font-size: 13px; color: black;">
                                    </h:outputText >
                                    <p:spacer height="30"/>
                                </div>
                            </div>      

                            <p:panel style="height: 400px; margin-top: -20px; overflow-y:scroll">
                                <ui:repeat var="alignmentSource" value="#{setAlignmentSourceBean.nodeSelectedAlignmentsAll}" >
                                    <div class="row">
                                        <div class="col-5">
                                            <h:outputLabel value="#{alignmentSource.sourceLabel}" />
                                            <p:selectBooleanCheckbox value="#{alignmentSource.isSelected}" />
                                        </div>
                                        <div class="col-7" >
                                            <p:inputText disabled="true" value="#{alignmentSource.sourceLabel}" style="color: #43B572; font-size: 12px;"/>                    
                                        </div>
                                    </div>
                                </ui:repeat>
                            </p:panel>

                            <div class="row" style="margin-bottom: 10px;">
                                <div class="col-4" >
                                    <p:commandButton id="buttonCancel" value="#{langueBean.getMsg('btnCancel')}"
                                                     update="idAddAlignment"
                                                     style="width:100%; font-size: 13px; 
                                                     font-weight: normal;
                                                     color: white; background: #8C8C8C; border: none; box-shadow: none;"
                                                     class="btn btn-primary"
                                                     action="#{setAlignmentSourceBean.cancel()}"/>
                                </div>                                    
                                <div class="col-4" >
                                    <p:commandButton id="buttonSubmit" value="#{langueBean.getMsg('btnValidate')}"
                                                     update="idAddAlignment"
                                                     style="width:100%; font-size: 13px; 
                                                     font-weight: normal;
                                                     color: white; background: #F7A269; border: none; box-shadow: none;"
                                                     class="btn btn-primary"
                                                     action="#{setAlignmentSourceBean.updateSelectedAlignment()}"/>
                                </div>
                            </div>
                        </p:panel>
                    </div>
                </div>
            </h:panelGroup>

            <!-- Pour ajouter une nouvelle source de type Opentheso -->
            <p:panel id="panelAddNewSource" rendered="#{alignmentBean.viewAddNewSource}">
                <div class="row">
                    <div class="col-6" >
                        <p:panel style="height: 620px; margin-top: -20px; margin-left: -20px">
                            <div class="row" style="margin-top: 10px;">
                                <div class="col-2">
                                    <h:outputText value="#{langueBean.getMsg('statistique.label')}" style="font-size: 12px;"/>
                                </div>
                                <div class="col-7">
                                    <p:inputText placeholder="#{langueBean.getMsg('rightbody.conceptdialog.source_name')}" value="#{setAlignmentSourceBean.sourceName}" 
                                                 style="font-size: 12px; height: 25px; "/>
                                </div>                                  
                            </div>

                            <div class="row">
                                <div class="col-2">
                                    <h:outputText value="#{langueBean.getMsg('rightbody.conceptdialog.uri')}" style="font-size: 12px;"/>
                                </div>
                                <div class="col-7">
                                    <p:inputText placeholder="#{langueBean.getMsg('rightbody.conceptdialog.uri')}" value="#{setAlignmentSourceBean.sourceUri}"
                                                 style="font-size: 12px; height: 25px;" />
                                </div>                                  
                            </div>    

                            <div class="row">
                                <div class="col-2">
                                    <h:outputText value="#{langueBean.getMsg('rightbody.conceptdialog.id_thesaurus')}" style="font-size: 12px;"/>
                                </div>
                                <div class="col-7">
                                    <p:inputText placeholder="#{langueBean.getMsg('rightbody.conceptdialog.id_thesaurus')}" value="#{setAlignmentSourceBean.sourceIdTheso}"
                                                 style="font-size: 12px; height: 25px;"/>
                                </div>                                  
                            </div>        

                            <div class="row">
                                <div class="col-2" offset="1">
                                    <h:outputText value="Description" style="font-size: 12px;"/>
                                </div>
                                <div class="col-7">
                                    <p:inputText placeholder="note" value="#{setAlignmentSourceBean.description}"
                                                 style="font-size: 12px; height: 25px;"/>
                                </div>                                  
                            </div>

                            <p:spacer/>

                            <div class="row" style="margin-bottom: 10px;">
                                <div class="col-4" >
                                    <p:commandButton id="buttonCancel2" value="#{langueBean.getMsg('btnCancel')}"
                                                     update="idAddAlignment columnRightPanel panelAddNewSource"
                                                     style="width:100%; font-size: 13px; 
                                                     font-weight: normal;
                                                     color: white; background: #8C8C8C; border: none; box-shadow: none;"
                                                     class="btn btn-primary"
                                                     action="#{setAlignmentSourceBean.cancel()}"/>
                                </div>                                    
                                <div class="col-4">
                                    <p:commandButton id="buttonSubmit2" value="#{langueBean.getMsg('btnAdd')}"
                                                     update="idAddAlignment columnRightPanel panelAddNewSource"
                                                     style="width:100%; font-size: 13px; 
                                                     font-weight: normal;
                                                     color: white; background: #F7A269; border: none; box-shadow: none;"
                                                     class="btn btn-primary"
                                                     action="#{setAlignmentSourceBean.addAlignmentSource(currentUser.nodeUser.idUser)}"/>
                                </div>
                            </div>  
                        </p:panel>
                    </div>
                </div> 
            </p:panel>
        </div>

    </p:dialog>   
</ui:fragment>