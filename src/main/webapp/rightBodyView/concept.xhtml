<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:b="http://bootsfaces.net/ui"
             xmlns:p="http://primefaces.org/ui"
             xmlns:leaf="http://java.sun.com/jsf/composite/jsf2leaf">

    <h:panelGroup id="conceptView" rendered="#{conceptView.nodeConcept != null}" styleClass="textOpentheso">    
        <!-- Actions sur le concept -->
        <b:row id="idConceptViewActions" rendered="#{(currentUser.nodeUser != null)}" >           
            <b:column span="1" offset="11" colXs="2" offset-xs="10">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and 
                                        (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fa-plus-circle" icon-size="l"  value=""
                            style="color: #f47b2a; background: none; border: none; box-shadow: none; font-size: 12px; "
                            class="dropdown-submenu pull-left"
                            tooltip="#{langueBean.getMsg('rightbody.concept.global_actions')}" tooltip-delay-show="1000">


                    <b:navCommandLink  value="#{langueBean.getMsg('rightbody.concept.cut_move')}"
                                       tooltip="#{langueBean.getMsg('rightbody.concept.move_concept_branch')}" tooltip-delay-show="1000"
                                       action="#{dragAndDrop.setDragNode(tree.selectedNode)}"
                                       actionListener="#{dragAndDrop.onStartCut(conceptView.nodeConcept)}"
                                       styleClass="buttonIconOrange"
                                       ajax="true"
                                       style="font-size: 12px;"
                                       update="formRightTab:viewTabConcept:idConceptViewActions messageIndex">
                    </b:navCommandLink>
                    <b:navCommandLink  rendered="#{(dragAndDrop.isCopyOn) and
                                                   (dragAndDrop.cuttedConcept.concept.idConcept != conceptView.nodeConcept.concept.idConcept)}"
                                       value="#{langueBean.getMsg('rightbody.concept.paste')} #{cutAndPaste.nodeConceptDrag.term.lexical_value} #{langueBean.getMsg('rightbody.concept.as_specific')}" 
                                       tooltip="#{langueBean.getMsg('rightbody.concept.move_concept_under_concept')}" tooltip-delay-show="1000"
                                       actionListener="#{dragAndDrop.setDropNode(tree.selectedNode)}"
                                       action="#{dragAndDrop.paste(conceptView.nodeConcept)}"
                                       styleClass="buttonIconOrange"
                                       ajax="true"
                                       style="font-size: 12px;"
                                       update="formRightTab:viewTabConcept:conceptView:idConceptViewActions messageIndex idDragAndDrop dragAndDropForm">
                    </b:navCommandLink>
                    <b:navCommandLink  rendered="#{(dragAndDrop.isCopyOn) and (!dragAndDrop.cuttedConcept.concept.topConcept)}"
                                       value="#{langueBean.getMsg('rightbody.concept.paste')} #{cutAndPaste.nodeConceptDrag.term.lexical_value} #{langueBean.getMsg('rightbody.concept.at_the_root')}" 
                                       tooltip="#{langueBean.getMsg('rightbody.concept.move_concept_as_topterm')}" tooltip-delay-show="1000"
                                       actionListener="#{dragAndDrop.setIsDropToRoot(true)}"
                                       action="#{dragAndDrop.paste(null)}"
                                       styleClass="buttonIconOrange"
                                       ajax="true"
                                       style="font-size: 12px;"
                                       update="formRightTab:viewTabConcept:conceptView:idConceptViewActions messageIndex idDragAndDrop dragAndDropForm">
                    </b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_concept')}" 
                                      tooltip="#{langueBean.getMsg('rightbody.concept.toottip_delete_concept')}"
                                      actionListener="#{editConcept.infosDelete()}"
                                      update="idDeleteConcept deleteConceptForm"
                                      action="#{editConcept.reset('')}"
                                      oncomplete="PF('deleteConcept').show();"
                                      style="font-size: 12px;">
                    </b:navCommandLink>   
                    <b:navCommandLink rendered="#{!conceptView.nodeConcept.concept.isDeprecated}"
                                      value="#{langueBean.getMsg('rightbody.concept.deprecate_concept')}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_deprecate_concept')}"
                                      update="idDeprecateConcept deprecateConceptForm"
                                      action="#{editConcept.reset('')}"
                                      oncomplete="PF('deprecateConcept').show();"
                                      style="font-size: 12px;">
                    </b:navCommandLink>
                    <b:navCommandLink rendered="#{conceptView.nodeConcept.concept.isDeprecated}"
                                      value="#{langueBean.getMsg('rightbody.concept.approve_concept')}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_approve_concept')}"
                                      update="idApproveConcept approveConceptForm"
                                      action="#{editConcept.reset('')}"
                                      oncomplete="PF('approveConcept').show();"
                                      style="font-size: 12px;">
                    </b:navCommandLink>


                    <b:navCommandLink rendered="#{(roleOnTheso.nodePreference.useArk) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_generate_ark')}"
                                      tooltip-delay-show="500"
                                      value="#{langueBean.getMsg('rightbody.concept.generate_ark')}" 
                                      disabled="false"                                      
                                      actionListener="#{editConcept.infosArk()}"
                                      update="idGenerateArk generateArkForm"
                                      action="#{editConcept.reset('')}"
                                      oncomplete="PF('generateArk').show();"
                                      style="font-size: 12px;">
                    </b:navCommandLink>
                    <b:navCommandLink rendered="#{(roleOnTheso.nodePreference.useHandle) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_generate_handle')}"
                                      tooltip-delay-show="500"                                      
                                      value="#{langueBean.getMsg('rightbody.concept.generate_handle')}" 
                                      disabled="false"                                      
                                      actionListener="#{editConcept.infosHandle()}"
                                      update="idGenerateHandle generateHandleForm"
                                      action="#{editConcept.reset('')}"
                                      oncomplete="PF('generateHandle').show();"
                                      style="font-size: 12px;">
                    </b:navCommandLink>
                    <b:navCommandLink rendered="#{(roleOnTheso.nodePreference.useHandle) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_delete_handle')}"
                                      tooltip-delay-show="500"                                      
                                      value="#{langueBean.getMsg('rightbody.concept.delete_handle')}" 
                                      disabled="false"                                      
                                      actionListener="#{editConcept.infosDeleteHandle()}"
                                      update="idDeleteHandle deleteHandleForm"
                                      action="#{editConcept.reset('')}"
                                      oncomplete="PF('deleteHandle').show();"
                                      style="font-size: 12px;">
                    </b:navCommandLink>                    



                    <!-- partie pour générer les identifiants ARK d'un thésaurus à déplacer par la suite vers la boite à outils -->
                    <b:navLink rendered="#{(roleOnTheso.nodePreference.useArk) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"/>

                    <b:navCommandLink 
                        rendered="#{(roleOnTheso.nodePreference.useArk) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                        value="#{langueBean.getMsg('rightbody.concept.generate_missing_ark')}" 
                        tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_generate_missing_ark')}"
                        disabled="false"
                        action="#{editConcept.generateArkForConceptWithoutArk()}"
                        update="messageIndex"
                        style="font-size: 12px;">
                    </b:navCommandLink>
                    <b:navCommandLink 
                        rendered="#{(roleOnTheso.nodePreference.useArk) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                        value="#{langueBean.getMsg('rightbody.concept.generate_ark_for_branch')}" 
                        tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_generate_ark_for_branch')}"
                        disabled="false"
                        action="#{editConcept.generateArkForThisBranch()}"
                        update="messageIndex"
                        style="font-size: 12px;">
                    </b:navCommandLink>                     
                    <b:navCommandLink 
                        rendered="#{(roleOnTheso.nodePreference.useArk) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                        value="#{langueBean.getMsg('rightbody.concept.generate_all_ark')}" 
                        tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_generate_all_ark')}"
                        disabled="false"
                        action="#{editConcept.generateAllArk()}"
                        update="messageIndex"
                        style="font-size: 12px;">
                    </b:navCommandLink>   


                    <!-- partie pour générer les identifiants Handle d'un thésaurus à déplacer par la suite vers la boite à outils -->
                    <b:navLink rendered="#{(roleOnTheso.nodePreference.useHandle) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"/>

                    <b:navCommandLink 
                        rendered="#{(roleOnTheso.nodePreference.useHandle) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                        value="#{langueBean.getMsg('rightbody.concept.generate_missing_handle')}" 
                        tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_generate_missing_handle')}"
                        disabled="false"
                        action="#{editConcept.generateHandleForConceptWithoutHandle()}"
                        update="messageIndex"
                        style="font-size: 12px;">
                    </b:navCommandLink>
                    <b:navCommandLink 
                        rendered="#{(roleOnTheso.nodePreference.useHandle) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                        value="#{langueBean.getMsg('rightbody.concept.generate_handle_for_branch')}" 
                        tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_generate_handle_for_branch')}"
                        disabled="false"
                        action="#{editConcept.generateHandleForThisBranch()}"
                        update="messageIndex"
                        style="font-size: 12px;">
                    </b:navCommandLink>                     
                    <b:navCommandLink 
                        rendered="#{(roleOnTheso.nodePreference.useHandle) and (currentUser.nodeUser.isSuperAdmin or roleOnTheso.isAdminOnThisTheso)}"
                        value="#{langueBean.getMsg('rightbody.concept.generate_all_handle')}" 
                        tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_generate_all_handle')}"
                        disabled="false"
                        action="#{editConcept.generateAllHandle()}"
                        update="messageIndex"
                        style="font-size: 12px;">
                    </b:navCommandLink>                       



                    <!-- partie pour copier des concepts/branches d'un thésaurus à un autre -->
                    <b:navLink/>
                    <b:navCommandLink disabled="false"
                                      rendered="#{!copyAndPasteBetweenTheso.isCopyOn}"
                                      value="#{langueBean.getMsg('rightbody.concept.copy_to_another_thesaurus')}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_copy_to_another_thesaurus')}" tooltip-delay-show="1000"
                                      action="#{copyAndPasteBetweenTheso.onStartCopy()}"
                                      styleClass="buttonIconOrange"
                                      style="font-size: 12px;"
                                      update="formRightTab:viewTabConcept:idConceptViewActions messageIndex">
                    </b:navCommandLink>
                    <b:navCommandLink rendered="#{(copyAndPasteBetweenTheso.isCopyOn) and (copyAndPasteBetweenTheso.idThesoOrigin != selectedTheso.currentIdTheso) }"
                                      value="#{langueBean.getMsg('rightbody.concept.paste')} (#{copyAndPasteBetweenTheso.nodeConceptDrag.term.lexical_value}) #{langueBean.getMsg('rightbody.concept.here')} !!" 
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_paste_from_another_thesaurus')}" tooltip-delay-show="500"
                                      actionListener="#{copyAndPasteBetweenTheso.validatePaste()}" 
                                      styleClass="buttonIconOrange"
                                      style="font-size: 12px;"
                                      action="#{copyAndPasteBetweenTheso.setIsDropToRoot(false)}"
                                      update="idCopyAndPasteBetweenTheso copyAndPasteBetweenThesoForm"
                                      oncomplete="PF('copyAndPasteBetweenTheso').show();" >
                    </b:navCommandLink> 
                    <b:navCommandLink  rendered="#{copyAndPasteBetweenTheso.isCopyOn}"
                                       value="#{langueBean.getMsg('rightbody.concept.cancel_copy')}"
                                       tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_cancel_copy_other_thesaurus')}" tooltip-delay-show="1000"
                                       action="#{copyAndPasteBetweenTheso.reset()}"
                                       styleClass="buttonIconOrange"
                                       style="font-size: 12px;"
                                       update="formRightTab:viewTabConcept:idConceptViewActions messageIndex">
                    </b:navCommandLink>                      







                    <b:navLink/>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.import_tabulated_list')}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_import_tabulated_list')} #{conceptView.nodeConcept.term.lexical_value}" tooltip-delay-show="500"
                                      actionListener="#{editConcept.infosDelete()}"
                                      update="idListImportCsv listImportCsvForm"
                                      action="#{importFileBean.init()}"
                                      oncomplete="PF('listImportCsv').show();"
                                      style="font-size: 12px; ">
                    </b:navCommandLink>                     
                </b:dropMenu>        
            </b:column>

        </b:row> 

        <ui:include src="/dialog/concept/deleteConcept.xhtml" />   
        <ui:include src="/dialog/concept/deprecateConcept.xhtml" />
        <ui:include src="/dialog/concept/approveConcept.xhtml" />
        <ui:include src="/dialog/import/listImportCsv.xhtml" />
        <ui:include src="/dialog/concept/generateArk.xhtml" /> 
        <ui:include src="/dialog/concept/generateHandle.xhtml" />    
        <ui:include src="/dialog/concept/deleteHandle.xhtml" />           
        <ui:include src="/dialog/copyAndPasteBetweenTheso/copyAndPasteBetweenTheso.xhtml" />         






        <!-- Partie pour distinguer les concepts dépréciés -->
        <p:spacer rendered="#{conceptView.nodeConcept.concept.isDeprecated}"/>
        <p:panel id="idDeprecated" rendered="#{conceptView.nodeConcept.concept.isDeprecated}"
                 style="background-color: #C63632;">
            <b:row>
                <b:column span="12" colXs="12" style="color: white">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.concept_deprecated')}" />
                </b:column>
            </b:row>
            <b:row rendered="#{conceptView.nodeConcept.replacedBy.size() > 0}">
                <b:column span="12" colXs="12" style="color: white">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.replaced_by')}" title="Preferred Term" />
                    <ui:repeat var="replace" value="#{conceptView.nodeConcept.replacedBy}" varStatus="status" >
                        <h:outputText value=" #{replace.value}" title="#{replace.id}"/>
                        <h:outputText rendered="#{!status.last}" value=" , " style="color: white"/>
                    </ui:repeat>
                </b:column>
            </b:row>
        </p:panel>
        <p:spacer rendered="#{conceptView.nodeConcept.concept.isDeprecated}"/>



        <!-- Fil d'ariane -->
        <b:row style=" margin-bottom: 10px;">
            <b:column span="12">
                <ui:repeat var="path" value="#{conceptView.pathLabel}" >
                    <b:iconAwesome rendered="#{path.isStartOfPath}" value="fas fa-home" size="xs" style="color: #f47b2a;"/>
                    <b:navCommandLink rendered="#{path.isStartOfPath}" style="color:#43B572; background: none; border: none; box-shadow: none; font-size: 12px"
                                      value=" #{path.title}" tooltip="#{path.idConcept}" tooltip-delay-show="1000"
                                      action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                path.idConcept, selectedTheso.currentLang)}"
                                      update="formRightTab:viewTabConcept:conceptView"/> 
                    <b:navCommandLink rendered="#{!path.isStartOfPath}" style="color:#43B572; background: none; border: none; box-shadow: none; font-size: 12px"
                                      value="#{path.title}" tooltip="#{path.idConcept}" tooltip-delay-show="1000"
                                      action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                path.idConcept, selectedTheso.currentLang)}"
                                      update="formRightTab:viewTabConcept:conceptView"/>                     
                    <h:outputText value=" > " style="font-size: 12px; font-weight: bold"/>
                </ui:repeat>

                <b:iconAwesome rendered="#{conceptView.nodeConcept.concept.topConcept}" value="fas fa-home" size="xs" style="color: #f47b2a;"/>
                <h:outputText rendered="#{conceptView.nodeConcept.term.lexical_value != ''}" value=" #{conceptView.nodeConcept.term.lexical_value}" style="font-size: 12px;"/>
                <h:outputText rendered="#{conceptView.nodeConcept.term.lexical_value == ''}" value=" (#{conceptView.nodeConcept.concept.idConcept})" style="font-size: 12px;"/>                
                <h:outputText value=" > " style="font-size: 12px; font-weight: bold"/>

                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fa-plus-circle" icon-size="s"  value=" " iconAlign="right"
                            style="color: #f47b2a; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                      actionListener="#{newConcept.reset()}"                    
                                      update="idAddNT addNTForm"
                                      oncomplete="PF('addNT').show();"
                                      value="#{langueBean.getMsg('rightbody.concept.new_concept')}" 
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_new_concept')}" tooltip-delay-show="500"
                                      style="font-size: 12px;"
                                      styleClass="buttonIconOrange"/>

                    <b:navCommandLink rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                      actionListener="#{editFacet.initNewFacet()}"
                                      update="idAddFacet addFacetForm"
                                      oncomplete="PF('addFacet').show();"
                                      value="#{langueBean.getMsg('rightbody.concept.new_facet')}" 
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_new_facet')}" tooltip-delay-show="500"
                                      style="font-size: 12px;"
                                      styleClass="buttonIconOrange"/>
                </b:dropMenu>
            </b:column>
        </b:row>


        <!-- ligne PrefLabel -->
        <b:row id="idPrefLabelRow">
            <b:column span="3" colXs="4">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.preferred_term')}" title="#{langueBean.getMsg('rightbody.concept.tooltip_preferred_term')}"/>
            </b:column>
            <b:column span="1" >
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.rename_concept')}"  update="idRenameConcept renameForm" 
                                      actionListener="#{editConcept.reset(conceptView.nodeConcept.term.lexical_value)}"
                                      oncomplete="PF('renameConcept').show();"
                                      style="font-size: 12px;"/>
                </b:dropMenu>
            </b:column>            
            <b:column span="6" colXs="6">
                <h:outputText value="#{conceptView.nodeConcept.term.lexical_value} (#{conceptView.nodeConcept.term.lang})"
                              title="#{conceptView.nodeConcept.concept.idConcept}" style="font-weight: bold" />
                <p:separator styleClass="separator" style="margin-top: 10px; margin-bottom: 3px"/> 
            </b:column>
            <b:column span="2" colXs="0" rendered="#{!roleOnTheso.nodePreference.auto_expand_tree}">
                <b:commandButton icon-awesome="fa-anchor"
                                 action="#{tree.expandTreeToPath(
                                           conceptView.nodeConcept.concept.idConcept,
                                           conceptView.nodeConcept.concept.idThesaurus,
                                           conceptView.nodeConcept.term.lang)}"
                                 actionListener="#{selectedTheso.actionFromConceptToOn()}"
                                 update="formLeftTab formSearch:languageSelect"
                                 style="color:#f47b2a; background: none; border: none; box-shadow: none" 
                                 styleClass="buttonIconOrange" tooltip="#{langueBean.getMsg('rightbody.concept.replace_in_tree')}" tooltip-delay-show="1000" />
            </b:column>            
        </b:row>


        <!-- ligne concepts qui remplacent le concept déprécié -->
        <b:row id="idDeprecatedLabel" rendered="#{conceptView.nodeConcept.concept.isDeprecated}">
            <b:column span="3" colXs="4" style="background-color: #C63632; color: white">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.replace_with')}" title="#{langueBean.getMsg('rightbody.concept.tooltip_replace_with')}" />
            </b:column>
            <b:column span="1" >
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.replace_with2')}"  update="idReplaceBy replaceByForm"
                                      action="#{relatedBean.reset()}"
                                      actionListener="#{editConcept.reset('')}"
                                      oncomplete="PF('replaceBy').show();"
                                      style="font-size: 12px;"/>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delere_replace_with')}"  update="idDeleteReplaceBy deleteReplaceByForm"
                                      action="#{relatedBean.reset()}"
                                      actionListener="#{editConcept.reset('')}"
                                      oncomplete="PF('deleteReplaceBy').show();"
                                      style="font-size: 12px;"/>
                </b:dropMenu>
            </b:column>
            <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.replacedBy.size() == 0}">
                <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
            </b:column>


            <b:column id="idConceptDeprecatedColumn" span="8" colXs="8" rendered="#{conceptView.nodeConcept.replacedBy.size() != 0}">
                <ui:repeat   var="replace" value="#{conceptView.nodeConcept.replacedBy}" varStatus="status">
                    <b:navCommandLink rendered="#{replace.value != ''}"
                                      value="#{replace.value}" tooltip="#{replace.id}" tooltip-delay-show="1000"
                                      action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,replace.id, conceptView.selectedLang)}"
                                      update="formRightTab:viewTabConcept:conceptView indexTitle"
                                      style="color: #C63632;"></b:navCommandLink>
                    <b:navCommandLink rendered="#{replace.value == ''}"
                                      value="(#{replace.id})"
                                      action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,replace.id, conceptView.selectedLang)}"
                                      update="formLeftTab formRightTab indexTitle"
                                      style="color: #C63632;"></b:navCommandLink>

                    <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/>
                </ui:repeat>
            </b:column>
            <p:spacer/>
        </b:row>

        <!-- ligne qui rappelle les concepts déprécés qui sont remplacés par ce concept -->
        <b:row id="idRelaceLabel" rendered="#{conceptView.nodeConcept.replaces.size() > 0}">
            <b:column span="3" colXs="4" style="background-color: #f47b2a; color: white">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.replace')}" title="#{langueBean.getMsg('rightbody.concept.tooltip_replace')}" />
            </b:column>
            <b:column span="1" >
            </b:column>
            <b:column id="idConceptReplaceColumn" span="8" colXs="8" rendered="#{conceptView.nodeConcept.replaces.size() != 0}">
                <ui:repeat   var="replaces" value="#{conceptView.nodeConcept.replaces}" varStatus="status">
                    <b:navCommandLink rendered="#{replaces.value != ''}"
                                      value="#{replaces.value}" tooltip="#{replaces.id}" tooltip-delay-show="1000"
                                      action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,replaces.id, conceptView.selectedLang)}"
                                      update="formRightTab:viewTabConcept:conceptView indexTitle"
                                      style="color: #f47b2a;"></b:navCommandLink>
                    <b:navCommandLink rendered="#{replaces.value == ''}"
                                      value="(#{replaces.id})"
                                      action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,replaces.id, conceptView.selectedLang)}"
                                      update="formLeftTab formRightTab indexTitle"
                                      style="color: #C63632;"></b:navCommandLink>

                    <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/>
                </ui:repeat>
            </b:column>
            <p:spacer/>
        </b:row>





        <!-- ligne Collection -->
        <b:row id="idConceptGroupRow" >
            <b:column span="3" colXs="4">
                <h:outputText value="#{langueBean.getMsg('leftbody.collection')}" title="#{langueBean.getMsg('leftbody.collection')}"/>
            </b:column>
            <b:column span="1">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_to_group')}" 
                                      action="#{addConceptToGroupBean.init()}"
                                      oncomplete="PF('addConceptToGroup').show();"
                                      update="idAddConceptToGroup addConceptToGroupForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.remove_from_group')}" 
                                      action="#{removeFromGroupBean.init()}"
                                      oncomplete="PF('removeConceptFromGroup').show();"
                                      update="idRemoveConceptFromGroup removeFromGroupForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navLink/>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_concept_to_group')}" 
                                      action="#{removeConceptAndChildFromGroupBean.init()}"
                                      oncomplete="PF('addConceptAndChildToGroup').show();"
                                      update="idAddConceptAndChildToGroup addConceptAndChildToGroupForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.remove_concept_fom_group')}" 
                                      action="#{removeConceptAndChildFromGroupBean.init()}"
                                      oncomplete="PF('removeConceptAndChildFromGroup').show();"
                                      update="idRemoveConceptAndChildFromGroup removeConceptAndChildFromGroupForm"
                                      style="font-size: 12px;"></b:navCommandLink>                    
                </b:dropMenu>
            </b:column>

            <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeConceptGroup.size() == 0}">
                <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
            </b:column>


            <b:column id="idConceptGroupColumn" span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeConceptGroup.size() != 0}">
                <ui:repeat   var="domaine" value="#{conceptView.nodeConcept.nodeConceptGroup}" varStatus="status">
                    <b:navCommandLink rendered="#{domaine.lexicalValue != ''}"
                                      value="#{domaine.lexicalValue}"
                                      action="#{treeGroups.selectThisGroup(domaine.conceptGroup.idgroup)}"
                                      update="formLeftTab formRightTab indexTitle"
                                      style="color: #43B572;"></b:navCommandLink>  
                    <b:navCommandLink rendered="#{domaine.lexicalValue == ''}"
                                      value="(#{domaine.conceptGroup.idgroup})"
                                      action="#{treeGroups.selectThisGroup(domaine.conceptGroup.idgroup)}"
                                      update="formLeftTab formRightTab indexTitle"
                                      style="color: #43B572;"></b:navCommandLink>                                        

                    <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/>
                </ui:repeat>
            </b:column>            
        </b:row>

        <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 20px;"/>




        <!--                               -->        
        <!--                               -->        
        <!-- Navigation entre les concepts -->
        <!--                               -->
        <!--                               -->
        <!--                               -->        


        <!-- ligne BT -->
        <b:row >
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.broader')}" title="#{langueBean.getMsg('rightbody.concept.broader')}" />
            </b:column>

            <b:column span="1" rendered="#{(currentUser.nodeUser != null)}">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_generic_relation')}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_add_generic_relation')}"
                                      actionListener="#{broaderBean.reset()}"
                                      oncomplete="PF('addBroaderLink').show();"
                                      update="idAddBroaderLink addBroaderLinkForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_generic_relation')}" 
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_delete_generic_relation')}"
                                      actionListener="#{broaderBean.reset()}"
                                      oncomplete="PF('deleteBroaderLink').show();"
                                      update="idDeleteBroaderLink deleteBroaderLinkForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                </b:dropMenu>                  
            </b:column>
            <b:column span="1" colXs="1" rendered="#{(currentUser.nodeUser == null)}">
                <b:iconAwesome value="fa-level-up" size="m" style="color:#143a1e; "/>
            </b:column>            

            <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeBT.size() == 0}">
                <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/>                 
            </b:column>

            <h:panelGroup id="idConceptBroader">
                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeBT.size() != 0}">
                    <ui:repeat var="value" value="#{conceptView.nodeConcept.nodeBT}"  varStatus="status">
                        <b:navCommandLink rendered="#{value.title != ''}" 
                                          value="#{value.title}" tooltip="#{value.idConcept}" tooltip-delay-show="1000"
                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    value.idConcept, conceptView.selectedLang)}" update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #43B572;"
                                          styleClass="textOpentheso"/>
                        <b:navCommandLink rendered="#{value.title == ''}" 
                                          value="(#{value.idConcept})" tooltip="#{langueBean.getMsg('rightbody.concept.no_translation_in_this_language')}" tooltip-delay-show="1000"
                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    value.idConcept, conceptView.selectedLang)}" update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #FF7979;"
                                          styleClass="textOpentheso"/>   
                        <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/> 
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/> 
                </b:column>    
            </h:panelGroup>
        </b:row>      




        <!-- ligne NT -->
        <b:row >
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.narrower')}" title="#{langueBean.getMsg('rightbody.concept.narrower')}"/>
            </b:column>

            <b:column span="1" rendered="#{(currentUser.nodeUser != null)}">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_narrower_relation')}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_add_narrower_relation')}"
                                      actionListener="#{narrowerBean.reset()}"
                                      oncomplete="PF('addNarrowerLink').show();"
                                      update="idAddNarrowerLink addNarrowerLinkForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_narrower_relation')}" 
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_delete_narrower_relation')}"
                                      actionListener="#{narrowerBean.reset()}"
                                      oncomplete="PF('deleteNarrowerLink').show();"
                                      update="idDeleteNarrowerLink deleteNarrowerLinkForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.changing_relationships')}" 
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_changing_relationships')}"
                                      actionListener="#{narrowerBean.initForChangeRelations()}"
                                      oncomplete="PF('changeRelation').show();"
                                      update="idChangeRelation changeRelationForm"
                                      style="font-size: 12px;"></b:navCommandLink>                                      
                </b:dropMenu>                  
            </b:column>
            <b:column span="1" colXs="1" rendered="#{(currentUser.nodeUser == null)}">
                <b:iconAwesome value="fa-level-down" size="m" style="color:#143a1e;"/>                 
            </b:column>  

            <h:panelGroup id="idConceptNarrower" >            
                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeNT.size() == 0}">
                    <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
                    <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/>                
                </b:column>            
                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeNT.size() != 0}">
                    <ui:repeat rendered="#{conceptView.nodeConcept.nodeNT.size() lt 21}" var="value"
                               varStatus="status1" 
                               value="#{conceptView.nodeConcept.nodeNT}">
                        <b:navCommandLink rendered="#{value.title != ''}"  
                                          value="#{value.title}" tooltip="#{value.idConcept}" tooltip-delay-show="1000"

                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    value.idConcept, conceptView.selectedLang)}" update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #43B572;"
                                          styleClass="textOpentheso"/>
                        <b:navCommandLink rendered="#{value.title == ''}"
                                          value="(#{value.idConcept})" tooltip="#{langueBean.getMsg('rightbody.concept.no_translation_in_this_language')}" tooltip-delay-show="1000"

                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    value.idConcept, conceptView.selectedLang)}" update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #FF7979;"
                                          styleClass="textOpentheso"/> 
                        <h:outputText rendered="#{!status1.last}" value=" , " style="color: #FF7979"/>    
                    </ui:repeat>

                    <!-- plus de 20 NT -->
                    <ui:repeat rendered="#{conceptView.nodeConcept.nodeNT.size() gt 20}" var="value" varStatus="status2" 
                               value="#{conceptView.nodeConcept.nodeNT}" size="#{conceptView.sizeToShowNT}">
                        <b:navCommandLink rendered="#{value.title != ''}"  
                                          value="#{value.title}" tooltip="#{value.idConcept}" tooltip-delay-show="1000"

                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    value.idConcept, conceptView.selectedLang)}" update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #43B572;"
                                          styleClass="textOpentheso"/>
                        <b:navCommandLink rendered="#{value.title == ''}"
                                          value="(#{value.idConcept})" tooltip="#{langueBean.getMsg('rightbody.concept.no_translation_in_this_language')}" tooltip-delay-show="1000"

                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    value.idConcept, conceptView.selectedLang)}" update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #FF7979;"
                                          styleClass="textOpentheso"/>  
                        <h:outputText  value=" , " style="color: #FF7979"/>
                    </ui:repeat>

                    <b:navCommandLink rendered="#{conceptView.nodeConcept.nodeNT.size() gt (conceptView.sizeToShowNT)}"
                                      icon-awesome="fas fa-angle-double-right"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.click_to_view_more')}" tooltip-delay-show="1000"
                                      action="#{conceptView.incrementSizeToShowNT()}" update="formRightTab:viewTabConcept:conceptView:idConceptNarrower"
                                      style="color:  #FF7979"
                                      styleClass="textOpentheso"/>
                    <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/> 
                </b:column>
            </h:panelGroup>                
        </b:row>  




        <!-- ligne RT -->
        <b:row >
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.related')}" title="#{langueBean.getMsg('rightbody.concept.related')}"/>
            </b:column>            
            <b:column span="1" rendered="#{(currentUser.nodeUser != null)}">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_related_relation')}" 
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_add_related_relation')}" tooltip-delay-show="500"
                                      actionListener="#{relatedBean.reset()}"
                                      oncomplete="PF('addRelatedLink').show();"
                                      update="idAddRelatedLink addRelatedLinkForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_related_relation')}"
                                      tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_delete_related_relation')}" tooltip-delay-show="500"
                                      actionListener="#{relatedBean.reset()}"
                                      oncomplete="PF('deleteRelatedLink').show();"
                                      update="idDeleteRelatedLink deleteRelatedLinkForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                </b:dropMenu>                  
            </b:column>
            <b:column span="1" colXs="1" rendered="#{(currentUser.nodeUser == null)}">
                <b:iconAwesome value="fa-exchange" size="m" style="color:#143a1e"/>                
            </b:column>            

            <h:panelGroup id="idConceptRelated" >
                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeRT.size() == 0}">
                    <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
                    <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/>                
                </b:column>            

                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeRT.size() != 0}">
                    <ui:repeat var="rt" value="#{conceptView.nodeConcept.nodeRT}" varStatus="status">
                        <b:navCommandLink rendered="#{rt.title != ''}" 
                                          value="#{rt.title}" tooltip="#{rt.idConcept}" tooltip-delay-show="1000"
                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    rt.idConcept, conceptView.selectedLang)}" update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #43B572;background: none; box-shadow: none; border: none;"
                                          styleClass="textOpentheso"/>
                        <b:navCommandLink rendered="#{rt.title == ''}"
                                          value="(#{rt.idConcept})" tooltip="#{langueBean.getMsg('rightbody.concept.no_translation_in_this_language')}" tooltip-delay-show="1000"
                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    rt.idConcept, conceptView.selectedLang)}" update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #FF7979; background: none; box-shadow: none; border: none;"
                                          styleClass="textOpentheso"/>   
                        <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/>
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/> 
                </b:column>  
            </h:panelGroup>                
        </b:row>


        <!-- ligne EM USE -->
        <b:row>
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.synonym')}" title="#{langueBean.getMsg('rightbody.concept.synonym')}"/>
            </b:column>
            <b:column span="1" rendered="#{(currentUser.nodeUser != null)}">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_synonym')}" 
                                      actionListener="#{synonymBean.reset()}"
                                      oncomplete="PF('addSynonym').show();"
                                      update="idAddSynonym addSynonymForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.modify_synonym')}" 
                                      actionListener="#{synonymBean.reset()}"
                                      action="#{synonymBean.prepareNodeEMForEdit()}"
                                      oncomplete="PF('renameSynonym').show();"
                                      update="idRenameSynonym renameSynonymForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_synonym')}" 
                                      actionListener="#{synonymBean.reset()}"
                                      oncomplete="PF('deleteSynonym').show();"
                                      update="idDeleteSynonym deleteSynonymForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                </b:dropMenu>                  
            </b:column>

            <h:panelGroup id="idConceptSynonyms" >
                <b:column span="1" colXs="1" rendered="#{(currentUser.nodeUser == null)}">
                    <b:iconAwesome value="fa-arrows-h" size="m" style="color:#143a1e"/>                
                </b:column> 

                <b:column span="8" colXs="8" rendered="#{(conceptView.nodeConcept.nodeEM == null) or (conceptView.nodeConcept.nodeEM.size() == 0)}">
                    <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
                     <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/> 
                </b:column>  

                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeEM.size() != 0}">
                    <b:row>
                        <b:column span="12">
                            <ui:repeat var="em" value="#{conceptView.nodeConcept.nodeEM}" varStatus="status">
                                <h:outputText rendered="#{!em.hiden}" value="#{em.lexical_value}" styleClass="textOpentheso" style="color: #666666"/>                     
                                <h:outputText rendered="#{(!status.last) and (!em.hiden)}" value=" , " style="color: #FF7979"/>
                            </ui:repeat>
                        </b:column>
                    </b:row>
                    <b:row rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}">
                        <b:column span="12" >
                            <h:outputText  value="#{langueBean.getMsg('rightbody.concept.hidden_synonym')}" 
                                           title="#{langueBean.getMsg('rightbody.concept.hidden_synonym')}" style="font-size: 12px; color: #FF7979; font-style: italic " />
                            <ui:repeat var="em2" value="#{conceptView.nodeConcept.nodeEM}" varStatus="status">
                                <h:outputText rendered="#{em2.hiden}" value="#{em2.lexical_value}" styleClass="textOpentheso" style="color: #666666"/>                     
                                <h:outputText rendered="#{(em2.hiden) and (!status.last)}" value=" , " style="color: #FF7979"/>
                            </ui:repeat>
                        </b:column>
                    </b:row>  
                    <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/>                     
                </b:column>
            </h:panelGroup>                
        </b:row>         




        
        
        <!-- ligne Traductions -->
        <b:row rendered="#{(currentUser.nodeUser != null) or (conceptView.nodeConcept.nodeTermTraductions.size() !=0)}">
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.traduction')}" />
            </b:column>
            <b:column span="1" rendered="#{(currentUser.nodeUser != null)}">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right" tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_traduction')}" tooltip-delay-show="1000"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_traduction')}" 
                                      actionListener="#{traductionBean.reset()}"
                                      action = "#{traductionBean.setLangWithNoTraduction()}"
                                      oncomplete="PF('addTraduction').show();"
                                      update="idAddTraduction addTraductionForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_traduction')}" 
                                      actionListener="#{traductionBean.reset()}"
                                      oncomplete="PF('renameTraduction').show();"
                                      update="idRenameTraduction renameTraductionForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_traduction')}" 
                                      actionListener="#{traductionBean.reset()}"
                                      oncomplete="PF('deleteTraduction').show();"
                                      update="idDeleteTraduction deleteTraductionForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                </b:dropMenu> 
            </b:column>
            <h:panelGroup id="idConceptTraductions">
                <b:column span="1" colXs="1" rendered="#{(currentUser.nodeUser == null)}">
                    <b:iconAwesome value="fa-language" size="m" style="color:#143a1e"/>                
                </b:column> 
                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeTermTraductions.size() == 0}">
                    <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
                </b:column>


                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeTermTraductions.size() != 0}">
                    <ui:repeat var="trad" value="#{conceptView.nodeConcept.nodeTermTraductions}" varStatus="status2">
                        <b:navCommandLink value="#{trad.lexicalValue} (#{trad.lang})"
                                          tooltip="#{conceptView.nodeConcept.concept.idConcept}" tooltip-delay-show="1000"
                                          action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                                    conceptView.nodeConcept.concept.idConcept,
                                                    trad.lang)}"
                                          update="formRightTab:viewTabConcept:conceptView indexTitle"
                                          style="color: #43B572;"
                                          styleClass="textOpentheso"/>  
                        <h:outputText rendered="#{!status2.last}" value=" , " style="color: #FF7979"/>                                   
                    </ui:repeat> 
                </b:column>
            </h:panelGroup>
        </b:row>            
        
        
        <p:separator styleClass="separator" style="margin-top: 20px; margin-bottom: 20px;"/>           
        <!--                               -->        
        <!--              Fin              -->        
        <!-- Navigation entre les concepts -->
        <!--                               -->
        <!--                               -->
        <!--                               -->  




        <!--                                  -->        
        <!-- Total des concepts de la branche --> 
        <!--                                  -->      
        <b:row >
            <b:column span="3" colXs="3" >
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.branch_count')}" title="#{langueBean.getMsg('rightbody.concept.tootltip_branch_count')}"/>
            </b:column>
            <b:column span="1">
                <b:navCommandLink icon-awesome="fas fa-calculator" icon-size="m"
                                  tooltip="#{langueBean.getMsg('rightbody.concept.tootltip_branch_count')}"
                                  tooltip-delay-show="500"
                                  actionListener="#{conceptView.countTheTotalOfBranch()}"
                                  update="branchCount"
                                  style="color: #F7A269; font-size: 12px;"></b:navCommandLink>
            </b:column>
            <b:column id="branchCount" span="8" colXs="8">
                <h:outputText rendered="#{conceptView.countOfBranch != 0}"
                              value="#{conceptView.countOfBranch} concept (s)" title="#{langueBean.getMsg('rightbody.concept.clic_branch_count')}"
                              style="font-size: 12px; color: #666666" />
            </b:column>             
        </b:row>         
        <p:separator styleClass="separator" style="margin-top: 5px; margin-bottom: 5px;"/>     
        <!--           Fin                    -->        
        <!-- Total des concepts de la branche --> 
        <!--                                  -->          









        <!-- ligne Notes -->
        <b:row  rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}">
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.notes')}" style="font-size: 12px; color: grey; font-style: italic "/>
                <p:commandButton
                    icon="fa fa-plus-circle fa-s"
                    actionListener="#{noteBean.reset()}"                    
                    update="idAddNote addNoteForm"
                    oncomplete="PF('addNote').show();"
                    title="#{langueBean.getMsg('rightbody.concept.add_note')}"
                    style="margin-left: -5px; font-size: 12px"
                    styleClass="buttonIconOrange"/>                    
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px;"/> 
            </b:column>
        </b:row >         

        <h:panelGroup id="idConceptNotes">
            <b:row rendered="#{conceptView.notes.size() != 0}">
                <b:column span="3" colXs="3">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.note')}" title="#{langueBean.getMsg('rightbody.concept.note')}"/>
                </b:column>
                <b:column span="1">
                    <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                                style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('note')}"
                                          oncomplete="PF('deleteNote').show();"
                                          update="idDeleteNote deleteNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('note')}"                                          
                                          oncomplete="PF('editNote').show();"
                                          update="idEditNote editNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                    </b:dropMenu>                     
                </b:column>
                <b:column span="8" colXs="8">
                    <ui:repeat var="note" value="#{conceptView.notes}" >
                        <h:outputText value="#{note.lexicalvalue}"  style="font-size: 12px;color: #666666" escape="false"/>
                        <br/>
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px"/> 
                </b:column>            
            </b:row> 

            <b:row rendered="#{conceptView.changeNotes.size() != 0}">
                <b:column span="3" colXs="3">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.change_note')}" title="#{langueBean.getMsg('rightbody.concept.change_note')}"/>
                </b:column>
                <b:column span="1">
                    <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                                style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('changeNote')}"
                                          oncomplete="PF('deleteNote').show();"
                                          update="idDeleteNote deleteNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('changeNote')}"                                          
                                          oncomplete="PF('editNote').show();"
                                          update="idEditNote editNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                    </b:dropMenu> 
                </b:column>
                <b:column span="8" colXs="8">
                    <ui:repeat var="changeNote" value="#{conceptView.changeNotes}" >
                        <h:outputText value="#{changeNote.lexicalvalue}"  style="font-size: 12px; color: #666666" escape="false"/>
                        <br/>
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px"/> 
                </b:column>
            </b:row> 

            <b:row rendered="#{conceptView.definitions.size() != 0}">
                <b:column span="3" colXs="3">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.definition')}" title="#{langueBean.getMsg('rightbody.concept.definition')}"/>
                </b:column>
                <b:column span="1">
                    <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                                style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('definition')}"
                                          oncomplete="PF('deleteNote').show();"
                                          update="idDeleteNote deleteNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('definition')}"                                          
                                          oncomplete="PF('editNote').show();"
                                          update="idEditNote editNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                    </b:dropMenu> 
                </b:column>
                <b:column span="8" colXs="8">
                    <ui:repeat var="def" value="#{conceptView.definitions}" >
                        <h:outputText value="#{def.lexicalvalue}"  style="font-size: 12px; color: #666666" escape="false"/>
                        <br/>
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px"/> 
                </b:column>
            </b:row> 

            <b:row rendered="#{conceptView.editorialNotes.size() != 0}">
                <b:column span="3" colXs="3">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.editorial_note')}" title="#{langueBean.getMsg('rightbody.concept.editorial_note')}"/>
                </b:column>
                <b:column span="1">
                    <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                                style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('editorialNote')}"
                                          oncomplete="PF('deleteNote').show();"
                                          update="idDeleteNote deleteNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('editorialNote')}"                                          
                                          oncomplete="PF('editNote').show();"
                                          update="idEditNote editNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                    </b:dropMenu> 
                </b:column>
                <b:column span="8" colXs="8">
                    <ui:repeat var="editorialNote" value="#{conceptView.editorialNotes}" >
                        <h:outputText value="#{editorialNote.lexicalvalue}"  style="font-size: 12px; color: #666666" escape="false"/>
                        <br/>
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px"/> 
                </b:column>
            </b:row>

            <b:row rendered="#{conceptView.examples.size() != 0}">
                <b:column span="3" colXs="3">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.example')}" title="#{langueBean.getMsg('rightbody.concept.example')}" />
                </b:column>
                <b:column span="1">
                    <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                                style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('example')}"
                                          oncomplete="PF('deleteNote').show();"
                                          update="idDeleteNote deleteNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('example')}"                                          
                                          oncomplete="PF('editNote').show();"
                                          update="idEditNote editNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                    </b:dropMenu> 
                </b:column>
                <b:column span="8" colXs="8">
                    <ui:repeat var="example" value="#{conceptView.examples}" >
                        <h:outputText value="#{example.lexicalvalue}"  style="font-size: 12px; color: #666666" escape="false"/>
                        <br/>
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px"/> 
                </b:column>
            </b:row>

            <b:row rendered="#{conceptView.historyNotes.size() != 0}">
                <b:column span="3" colXs="3">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.history_note')}" title="#{langueBean.getMsg('rightbody.concept.history_note')}"/>
                </b:column>
                <b:column span="1">
                    <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                                style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('historyNote')}"
                                          oncomplete="PF('deleteNote').show();"
                                          update="idDeleteNote deleteNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('historyNote')}"                                          
                                          oncomplete="PF('editNote').show();"
                                          update="idEditNote editNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                    </b:dropMenu> 
                </b:column>
                <b:column span="8" colXs="8">
                    <ui:repeat var="historyNote" value="#{conceptView.historyNotes}" >
                        <h:outputText value="#{historyNote.lexicalvalue}"  style="font-size: 12px; color: #666666" escape="false"/>
                        <br/>
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px"/> 
                </b:column>
            </b:row>

            <b:row rendered="#{conceptView.scopeNotes.size() != 0}">
                <b:column span="3" colXs="3">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.scope_note')}" title="#{langueBean.getMsg('rightbody.concept.scope_note')}"/>
                </b:column>
                <b:column span="1">
                    <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                                style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('scopeNote')}"
                                          oncomplete="PF('deleteNote').show();"
                                          update="idDeleteNote deleteNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                        <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_note')}" 
                                          actionListener="#{noteBean.reset()}"
                                          action = "#{noteBean.setSelectedTypeNote('scopeNote')}"                                          
                                          oncomplete="PF('editNote').show();"
                                          update="idEditNote editNoteForm"
                                          style="font-size: 12px;"></b:navCommandLink>
                    </b:dropMenu> 
                </b:column>
                <b:column span="8" colXs="8">
                    <ui:repeat var="scopeNote" value="#{conceptView.scopeNotes}" >
                        <h:outputText value="#{scopeNote.lexicalvalue}"  style="font-size: 12px; color: #666666" escape="false"/>
                        <br/>
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px"/> 
                </b:column>
            </b:row>              

        </h:panelGroup>



        <!-- ligne images -->        
        <b:row rendered="#{(currentUser.nodeUser != null) or (conceptView.nodeConcept.nodeimages.size() !=0)}">
            <b:column span="3" colXs="3" rendered="#{conceptView.nodeConcept.nodeimages.size() == 0}">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.image')}" />
            </b:column>
            <b:column span="3" colXs="3" rendered="#{conceptView.nodeConcept.nodeimages.size() != 0}">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.image')} " />
                <h:outputText value="( #{conceptView.nodeConcept.nodeimages.size()} )" style="color: #43B572; margin-left: 10px;"/>
            </b:column>            
            
            
            <b:column span="1">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right" tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_image')}" tooltip-delay-show="1000"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_image')}" 
                                      actionListener="#{imageBean.reset()}"
                                      oncomplete="PF('addImage').show();"
                                      update="idAddImage addImageForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_image')}" 
                                      actionListener="#{imageBean.reset()}"
                                      action="#{imageBean.prepareImageForEdit()}"                                      
                                      oncomplete="PF('updateImage').show();"
                                      update="idUpdateImage updateImageForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_image')}" 
                                      actionListener="#{imageBean.reset()}"
                                      oncomplete="PF('deleteImage').show();"
                                      update="idDeleteImage deleteImageForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                </b:dropMenu> 
            </b:column>
            <h:panelGroup id="idConceptImages">
                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeimages.size() == 0}">
                    <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
                    <p:separator styleClass="separator" style="margin-top: 2px"/> 
                </b:column> 


                <b:column span="6" colXs="6"  offset-md="0" offsetSm="0" offset-xs="0" rendered="#{conceptView.nodeConcept.nodeimages.size() !=0}">
                    <p:galleria value="#{conceptView.nodeConcept.nodeimages}" var="images" panelWidth="450" panelHeight="110" 
                                autoPlay="false" showCaption="false">
                        <p:graphicImage value="#{images.uri}"
                                        title="#{images.copyRight}"
                                        url="#{images.uri}"
                                        alt="#{images.uri}"
                                        height="100"
                                        style="cursor: pointer;"/>
                    </p:galleria>                        
                    <p:separator styleClass="separator" style="margin-top: 5px"/>
                </b:column>
            </h:panelGroup>
        </b:row>





        <!-- ligne GPS -->
        <b:row rendered="#{(currentUser.nodeUser != null) or (conceptView.nodeConcept.nodeGps != null)}">
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.gps_coordinates')}" />
            </b:column>
            <b:column span="1">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right" tooltip="#{langueBean.getMsg('rightbody.concept.tooltip_gps_coordinates')}" tooltip-delay-show="1000"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_edit_gps_coordinates')}" 
                                      actionListener="#{gpsBean.reset()}"
                                      oncomplete="PF('setGps').show();"
                                      update="idSetGps setGpsForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_gps_coordinates')}" 
                                      actionListener="#{gpsBean.reset()}"
                                      oncomplete="PF('deleteGps').show();"
                                      update="idDeleteGps deleteGpsForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                </b:dropMenu> 
            </b:column> 

            <h:panelGroup id="idConceptGps">

                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeGps == null}">
                    <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
                    <p:separator styleClass="separator" style="margin-top: 2px;"/> 
                </b:column>            

                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeGps != null}">
                    <b:row>
                        <b:column span="8">
                            <b:row>
                                <b:column>
                                    <h:outputText value="Lat: " style="font-size: 12px;"/>
                                    <h:outputText value="#{conceptView.nodeConcept.nodeGps.latitude}" style="font-size: 12px; color: #666666"/>
                                </b:column>
                            </b:row>
                            <b:row>
                                <b:column>
                                    <h:outputText value="Long: " style="font-size: 12px;"/>
                                    <h:outputText value="#{conceptView.nodeConcept.nodeGps.longitude}" style="font-size: 12px; color: #666666"/>
                                </b:column>
                            </b:row>
                        </b:column>
                    </b:row>
                    <b:row>
                        <b:column>
                            <!--<p:accordionPanel styleClass="accordionMenu" activeIndex="-2">
                                <p:tab title="Map" titleStyleClass="titleAccordion">
                                    <leaf:mapAdvanced map="# {conceptView.mapModel}" />                    
                                </p:tab>
                            </p:accordionPanel>
                            -->
                            <p:panel header="Map" toggleable="true" closable="false" toggleSpeed="500" 
                                     style="margin-top: 10px; margin-bottom: 10px">
                                <leaf:mapAdvanced map="#{conceptView.mapModel}" />
                            </p:panel>
                        </b:column>
                    </b:row>
                    <b:row>
                        <b:column>
                            <p:separator styleClass="separator" style="margin-top: 2px;"/>
                        </b:column>
                    </b:row>
                </b:column>
            </h:panelGroup>
        </b:row>


        <!-- ligne Corpus liés -->        
        <b:row rendered="#{conceptView.nodeCorpuses != null and conceptView.haveCorpus}">
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.linked_corpus')}" />
            </b:column>
            <b:column span="1">
                <p:commandButton rendered="#{user.nodeUser != null}" icon="fas fa-cog fa-xs"  style="color:#F7A269; background: none; border: none; box-shadow: none" />
            </b:column>            
            <b:column span="8" colXs="8">
                <ui:repeat var="corpus" value="#{conceptView.nodeCorpuses}" >
                    <b:row rendered="#{corpus.count != 0 and corpus.count!= -1}">
                        <b:column >
                            <b:link href="#{corpus.uriLink}"
                                    value="#{corpus.corpusName} (#{corpus.count} #{langueBean.getMsg('rightbody.concept.notices')})" icon="link" 
                                    target="_blank"
                                    icon-size="sm" style="font-size: 12px; color: #43B572;"></b:link>                            
                        </b:column> 
                    </b:row> 
                </ui:repeat> 
                <p:separator styleClass="separator" style="margin-top: 2px"/>                
            </b:column>
        </b:row>




        <!-- ligne Alignements -->
        <b:row rendered="#{(currentUser.nodeUser != null) or (conceptView.nodeConcept.nodeAlignments.size() != 0)}">
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.alignment')}" />
            </b:column>
            <b:column span="1">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_alignment_auto')}" 
                                      actionListener="#{alignmentBean.initAlignementByStep(
                                                        selectedTheso.currentIdTheso, 
                                                        conceptView.nodeConcept.concept.idConcept,
                                                        conceptView.selectedLang)}"
                                      action="#{alignmentBean.nextTen(conceptView.selectedLang, selectedTheso.currentIdTheso)}"                                      
                                      oncomplete="PF('addAlignment').show();"
                                      update="idAddAlignment addAlignmentForm"
                                      style="font-size: 12px;"></b:navCommandLink>

                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_alignment_manual')}" 
                                      actionListener="#{alignmentManualBean.reset()}"
                                      oncomplete="PF('addManualAlignment').show();"
                                      update="idAddManualAlignment addManualAlignmentForm"
                                      style="font-size: 12px;"></b:navCommandLink>                                      

                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.edit_alignment')}" 
                                      action="#{alignmentManualBean.reset()}"                                      
                                      oncomplete="PF('updateAlignment').show();"
                                      update="idUpdateAlignment updateAlignmentForm"
                                      style="font-size: 12px;"></b:navCommandLink>

                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.delete_alignment')}" 
                                      actionListener="#{alignmentBean.initAlignementByStep(
                                                        selectedTheso.currentIdTheso, 
                                                        conceptView.nodeConcept.concept.idConcept,
                                                        conceptView.selectedLang)}"
                                      action="#{alignmentManualBean.reset()}"                                      
                                      oncomplete="PF('deleteAlignment').show();"
                                      update="idDeleteAlignment deleteAlignmentForm"
                                      style="font-size: 12px;"></b:navCommandLink>                                        
                </b:dropMenu>                  
            </b:column>
            <h:panelGroup id="idConceptAlignment" >
                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeAlignments.size() == 0}">
                    <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />
                    <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 3px"/>                
                </b:column>                 
                <b:column span="8" colXs="8" rendered="#{conceptView.nodeConcept.nodeAlignments.size() != 0}">
                    <ui:repeat var="align" value="#{conceptView.nodeConcept.nodeAlignments}" >
                        <b:row>
                            <b:column span="2">
                                <h:outputText value="#{align.alignmentLabelType}:" />
                            </b:column> 
                            <b:column span="10">
                                <b:link href="#{align.uri_target}"
                                        value="#{align.uri_target}"
                                        tooltip="#{align.thesaurus_target}" tooltip-delay-show="1000"
                                        target="_blank"
                                        icon="link" icon-size="sm" style="font-size: 12px; color: #43B572;"></b:link>                            
                            </b:column> 
                        </b:row> 
                    </ui:repeat>
                    <p:separator styleClass="separator" style="margin-top: 2px"/>                
                </b:column>
            </h:panelGroup>                
        </b:row>




        <!-- ligne Identifiants pérennes -->
        <b:row >
            <b:column span="12" colXs="12">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.identifier')}" />
            </b:column>
        </b:row > 

        <!-- Notation -->
        <b:row id="idConceptNotationRow" rendered="#{(currentUser.nodeUser != null) or (conceptView.nodeConcept.concept.notation != '')}">
            <b:column span="3" colXs="3">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.notation')}" style="margin-left: 5px;"/>
            </b:column>
            <b:column span="1">
                <b:dropMenu rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                            style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                    <b:navCommandLink value="#{langueBean.getMsg('rightbody.concept.add_edit_notation')}" 
                                      action="#{notationBean.reset()}"
                                      oncomplete="PF('setNotation').show();"
                                      update="idSetNotation setNotationForm"
                                      style="font-size: 12px;"></b:navCommandLink>
                </b:dropMenu>                
            </b:column>            
            <b:column span="8" colXs="8" rendered="#{(conceptView.nodeConcept.concept.notation == null) or (conceptView.nodeConcept.concept.notation == '') }">
                <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" style="font-size: 12px; color: grey; font-style: italic " />                
            </b:column>
            <b:column  span="8" colXs="8" id="idConceptNotationColumn" rendered="#{(conceptView.nodeConcept.concept.notation != null) and (conceptView.nodeConcept.concept.notation != '') }">
                <h:outputText value="#{conceptView.nodeConcept.concept.notation}" style="font-size: 12px; color: #666666"/>
            </b:column>            
        </b:row >






        <b:row >
            <b:column span="4" colXs="4">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.internal_id')}" style="margin-left: 5px;"/>
            </b:column>
            <b:column span="8" colXs="8">
                <b:link href="#{request.contextPath}/?idc=#{conceptView.nodeConcept.concept.idConcept}&amp;idt=#{conceptView.nodeConcept.concept.idThesaurus}"
                        value="#{conceptView.nodeConcept.concept.idConcept}" icon="link" icon-size="sm" style="font-size: 12px; color: #43B572;"></b:link>
            </b:column>
        </b:row >

        <!--Panel de séparation des identifiants pérennes permet de les masquer-->
        <!--<<h:panelGroup rendered="# {conceptView.nodeConcept.concept.idConcept == 'ddd'}"> -->
        <h:panelGroup>
            <b:row contentDisabled="true">
                <b:column span="4" colXs="4">
                    <h:outputText value="#{langueBean.getMsg('rightbody.concept.original_uri')}" style="margin-left: 5px;"/>
                </b:column>

                <!-- Cas d'uri de type Ark -->
                <b:column span="8" colXs="8" rendered="#{roleOnTheso.nodePreference.originalUriIsArk}">
                    <b:link href="#{roleOnTheso.nodePreference.originalUri}/#{conceptView.nodeConcept.concept.idArk}"
                            value="#{roleOnTheso.nodePreference.originalUri}/#{conceptView.nodeConcept.concept.idArk}" icon="link"
                            target="_blank"
                            icon-size="sm" style="font-size: 12px; color: #43B572;"></b:link>
                </b:column>

                <!-- Cas d'uri de type Handle -->
                <b:column span="8" colXs="8" rendered="#{roleOnTheso.nodePreference.originalUriIsHandle}">
                    <b:link href="#{roleOnTheso.nodePreference.originalUri}/#{conceptView.nodeConcept.concept.idHandle}"
                            value="#{roleOnTheso.nodePreference.originalUri}/#{conceptView.nodeConcept.concept.idHandle}" icon="link"
                            target="_blank"
                            icon-size="sm" style="font-size: 12px; color: #43B572;"></b:link>
                </b:column>

                <!-- Cas d'uri de type Doi -->
                <b:column span="8" colXs="8" rendered="#{roleOnTheso.nodePreference.originalUriIsDoi}">
                    <b:link href="#{roleOnTheso.nodePreference.originalUri}/#{conceptView.nodeConcept.concept.idDoi}"
                            value="#{roleOnTheso.nodePreference.originalUri}/#{conceptView.nodeConcept.concept.idDoi}" icon="link"
                            target="_blank"
                            icon-size="sm" style="font-size: 12px; color: #43B572;"></b:link>
                </b:column>                

                <!-- Cas d'uri interne 
                <b:column span="8" colXs="8" rendered="# {!roleOnTheso.nodePreference.originalUriIsHandle and !roleOnTheso.nodePreference.originalUriIsArk}">
                    <b:link href="# {request.contextPath}/?idc=# {conceptView.nodeConcept.concept.idConcept}&amp;idt=# {conceptView.nodeConcept.concept.idThesaurus}"
                            value="# {request.contextPath}/?idc=# {conceptView.nodeConcept.concept.idConcept}&amp;idt=# {conceptView.nodeConcept.concept.idThesaurus}"
                            icon="link"
                            target="_blank"
                            icon-size="sm" style="font-size: 12px; color: #43B572;"></b:link>
                </b:column>
                -->
            </b:row >

            <b:row rendered="#{conceptView.nodeConcept.concept.idArk != ''}">
                <b:column span="4" colXs="4">
                    <h:outputText value="IdArk" style="margin-left: 5px;"/>
                </b:column>
                <b:column span="8" colXs="8">
                    <h:outputText value="#{conceptView.nodeConcept.concept.idArk}" style="font-size: 12px; color: #43B572;"/>
                    <!-- <b:link href="# {roleOnTheso.nodePreference.uriArk}# {conceptView.nodeConcept.concept.idArk}"
                            value="# {roleOnTheso.nodePreference.uriArk}# {conceptView.nodeConcept.concept.idArk}"
                            target="_blank"
                            icon="link" icon-size="sm" style="font-size: 12px; color: #43B572;"></b:link>
                    -->
                </b:column>
            </b:row >
            <b:row rendered="#{conceptView.nodeConcept.concept.idHandle != ''}">
                <b:column span="4" colXs="4">
                    <h:outputText value="IdHandle" style="margin-left: 5px;"/>
                </b:column>
                <b:column span="8" colXs="8">
                    <h:outputText value="#{conceptView.nodeConcept.concept.idHandle}" style="font-size: 12px; color: #43B572;"/>
                    <!--  <b:link href="https://hdl.handle.net/# {conceptView.nodeConcept.concept.idHandle}"
                            value="https://hdl.handle.net/# {conceptView.nodeConcept.concept.idHandle}"
                            target="_blank"
                            icon="link" icon-size="sm" style="font-size: 12px;color: #43B572;"></b:link>
                    -->
                </b:column>
            </b:row >

        </h:panelGroup>

        <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 5px; "/>

        <!-- ligne téléchargement -->        
        <ui:include src="download.xhtml" />


        <p:spacer height="20" />
        <!-- ligne dates -->        
        <b:row>    
            <b:column span="8" colXs="12" style="font-size: 12px; color: grey; font-style: italic ">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.created')}: " />
                <h:outputText value="#{conceptView.nodeConcept.concept.created}" style="color: #43B572"/>
                <h:outputText value=" #{langueBean.getMsg('rightbody.concept.last_modification')}: "/>
                <h:outputText value="#{conceptView.nodeConcept.concept.modified}" style="color: #43B572"/>
                <p:commandButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                 icon="fa fa-history"
                                 actionListener="#{historyBean.reset()}"                    
                                 update="idHistoricalView"
                                 oncomplete="PF('historicalView').show();"
                                 title="#{langueBean.getMsg('rightbody.concept.view_change_history')}"
                                 style=" font-size: 14px"
                                 styleClass="buttonIconOrange"/>
            </b:column>
        </b:row>
        <b:row rendered="#{(currentUser.nodeUser != null)}">
            <b:column span="8" colXs="12" style="font-size: 12px; color: grey; font-style: italic ">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.createdBy')} : " style="color: #666666"/>
                <h:outputText value="#{conceptView.creator}" style="color: #43B572"/>
            </b:column>
            <b:column span="8" colXs="12" style="font-size: 12px; color: grey; font-style: italic ">
                <h:outputText value="#{langueBean.getMsg('rightbody.concept.last_modificationBy')} : " style="color: #666666"/>
                <h:outputText value="#{conceptView.contributor}" style="color: #43B572"/>
            </b:column>
        </b:row>


        <h:panelGroup  rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}" >
            <!-- Dialogues -->        
            <ui:include src="/dialog/concept/addNT.xhtml" /> 
            <ui:include src="/dialog/facet/addFacet.xhtml" />
            <ui:include src="/dialog/concept/renameConcept.xhtml" />
            <ui:include src="/dialog/concept/replaceBy.xhtml" />
            <ui:include src="/dialog/concept/deleteReplaceBy.xhtml" />

            <ui:include src="/dialog/synonym/addSynonym.xhtml" />        
            <ui:include src="/dialog/synonym/deleteSynonym.xhtml" /> 
            <ui:include src="/dialog/synonym/renameSynonym.xhtml" /> 

            <ui:include src="/dialog/image/addImage.xhtml" />        
            <ui:include src="/dialog/image/deleteImage.xhtml" /> 
            <ui:include src="/dialog/image/updateImage.xhtml" />         

            <ui:include src="/dialog/broader/addBroaderLink.xhtml" /> 
            <ui:include src="/dialog/broader/deleteBroaderLink.xhtml" />         

            <ui:include src="/dialog/narrower/addNarrowerLink.xhtml" /> 
            <ui:include src="/dialog/narrower/deleteNarrowerLink.xhtml" /> 
            <ui:include src="/dialog/narrower/changeRelation.xhtml" />         

            <ui:include src="/dialog/related/addRelatedLink.xhtml" /> 
            <ui:include src="/dialog/related/deleteRelatedLink.xhtml" />         

            <ui:include src="/dialog/concept/setNotation.xhtml" />

            <ui:include src="/dialog/traduction/addTraduction.xhtml" />
            <ui:include src="/dialog/traduction/deleteTraduction.xhtml" />
            <ui:include src="/dialog/traduction/renameTraduction.xhtml" />

            <ui:include src="/dialog/group/removeConceptFromGroup.xhtml" />
            <ui:include src="/dialog/group/addConceptToGroup.xhtml" />
            <ui:include src="/dialog/group/removeConceptAndChildFromGroup.xhtml" />
            <ui:include src="/dialog/group/addConceptAndChildToGroup.xhtml" />

            <ui:include src="/dialog/note/addNote.xhtml" /> 
            <ui:include src="/dialog/note/deleteNote.xhtml" /> 
            <ui:include src="/dialog/note/editNote.xhtml" />  

            <ui:include src="/dialog/history/historicalView.xhtml" />

            <ui:include src="/dialog/alignment/addAlignment.xhtml" />
            <ui:include src="/dialog/alignment/deleteAlignment.xhtml" />     
            <ui:include src="/dialog/alignment/updateAlignment.xhtml" />         
            <ui:include src="/dialog/alignment/addManualAlignment.xhtml" />  

            <ui:include src="/dialog/gps/setGps.xhtml" />      
            <ui:include src="/dialog/gps/deleteGps.xhtml" />
        </h:panelGroup>
    </h:panelGroup>
</ui:fragment>