<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:f="http://xmlns.jcp.org/jsf/core"
             xmlns:p="http://primefaces.org/ui">

    <div class="row">
        <div class="col-12" style="text-align: center; margin-top: 10px; font-size: 14px;">
            <b>
                <h:outputText value="#{langueBean.getMsg('candidat.file')} "/>
                <h:outputText rendered="#{candidatBean.candidatSelected.createdBy != null}" style="font-size: 14px; color: #f47b2a;" value=" (#{candidatBean.candidatSelected.createdBy})"
                              title="#{langueBean.getMsg('rightbody.concept.createdBy')} #{candidatBean.candidatSelected.createdBy}"/>
            </b>
        </div>
    </div>

    <style>
        .ui-dataview-header.ui-widget-header.ui-helper-clearfix.ui-corner-top {
            display: none;
        }

        body .ui-dataview.ui-dataview-list .ui-dataview-row {
            border: solid #e9ecef;
            border-width: 0 0 0 0;
        }
    </style>

    <div class="card mb-4 py-3 border-left-success" style="margin-top: 10px;">
        <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 11px; margin-right: 11px">

            <!-- prefLabel -->
            <h:panelGroup id="vote" class="grid ui-fluid">
                <div class="row">
                    <div class="col-12 md:col-4">
                        <b><h:outputText value="#{langueBean.getMsg('candidat.title')} *" style="font-size: 14px;"/></b>
                    </div>
                </div>
                <div class="row">
                    <div class="col-11" >
                        <h:panelGroup id="candidateLabel" rendered="#{!candidatBean.isNewCandidatActivate()}">
                            <p:inputText id="inputTextCandidate" readonly="#{!candidatBean.isMyCandidate() }"
                                         value="#{candidatBean.candidatSelected.nomPref}"/>
                            <p:tooltip for="inputTextCandidate" value="Ne peut être modifié que par le créateur"
                                       showDelay="1000" position="top"/>                                
                        </h:panelGroup>
                        <h:panelGroup id="candidateLabel2" rendered="#{candidatBean.isNewCandidatActivate()}">
                            <p:inputText rendered="#{candidatBean.isNewCandidatActivate()}"
                                         value="#{candidatBean.candidatSelected.nomPref}" />
                        </h:panelGroup> 
                    </div>
                    <div class="col-1" >
                        <p:commandButton rendered="#{candidatBean.candidatSelected.voted}"
                                         actionListener="#{candidatBean.addVote()}" update="vote"
                                         icon="fas fa-thumbs-up" style="color : #FFF; height: 27px; border: none;"/>

                        <p:commandButton rendered="#{!candidatBean.candidatSelected.voted}"
                                         actionListener="#{candidatBean.addVote()}" update="vote"
                                         icon="fas fa-thumbs-down" style="background-color: #888; border: none; color: #FFF;height: 27px"/>
                    </div>
                </div>                    
            </h:panelGroup>

            <!-- pour la première définition qui est obligatoire-->
            <h:panelGroup id="candidateDef" rendered="#{candidatBean.isNewCandidatActivate()}" style="margin-top: 10px">
                <div class="row">
                    <div class="col-12 md:col-4">
                        <b><h:outputText value="#{langueBean.getMsg('candidat.definition')} *" style="font-size: 14px; "/></b>
                    </div>
                    <div class="col-12 md:col-4">
                        <div class="ui-inputgroup">
                            <p:textEditor id="textEditorDef" widgetVar="DefinitionNew"
                                          value="#{candidatBean.definition}" allowLinks="true"
                                          secure="false" height="100" style="font-size: 12px; color: black; border-color: #43B572; width: 100%;"
                                          placeholder="#{langueBean.getMsg('rightbody.conceptdialog.type_value')}" />
                        </div>
                    </div>
                </div>
            </h:panelGroup>

            <!-- collection -->
            <div class="row" style="margin-top: 10px">
                <div class="col-6">
                    <h:panelGroup id="candidatCollection" >
                        <div class="card mb-4 py-3 border-left-success" style="margin-top: 10px; background: #ECF8F1">
                            <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 11px; margin-right: 11px">

                                <b><h:outputText value="#{langueBean.getMsg('candidat.domaine')}" style="font-size: 14px;"/></b>

                                <p:autoComplete value="#{candidatBean.collectionTemps}" multiple="true" style="width: 100%; margin-bottom: 3px"
                                                var="values" forceSelection="true" completeMethod="#{candidatBean.searchCollection}"
                                                minQueryLength="1" itemLabel="#{values.value}" itemValue="#{values}"
                                                converter="searchConverterIdValue" scrollHeight="300">
                                    <p:ajax event="itemSelect" listener="#{candidatBean.onItemSelect}" update="messageIndex"/>
                                    <p:column>
                                        <h:outputText title="#{values.value}" value="#{values.value}"/>
                                    </p:column>
                                </p:autoComplete>

                                <div class="card mb-4 py-3 border-left-success">
                                    <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                                        <p:dataView id="collectionList" var="collection"
                                                    value="#{candidatBean.candidatSelected.collections}"
                                                    emptyMessage="#{langueBean.getMsg('rightbody.concept.no_value')}...">
                                            <p:dataViewListItem>
                                                <div class="product-list-item" style="display: flex; justify-content: space-between;">
                                                    <div class="product-list-detail">
                                                        <h:outputText value="#{collection.value}" style="font-weight: bold"/>
                                                    </div>
                                                    <div class="product-list-detail">
                                                        <p:commandLink title="Supprimer la collection : #{collection.value}"
                                                                       action="#{candidatBean.removeCollection(collection)}"
                                                                       update="@this" ajax="true" process="@this">
                                                            <h:outputText styleClass="ui-icon pi pi-times" style="margin:0 auto;"/>
                                                        </p:commandLink>
                                                    </div>
                                                </div>
                                            </p:dataViewListItem>
                                        </p:dataView>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:panelGroup>
                </div>

                <div class="col-6">
                    <h:panelGroup id="candidatSynonym" >
                        <div class="card mb-4 py-3 border-left-success" style="margin-top: 10px; background: #ECF8F1">
                            <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 11px; margin-right: 11px">

                                <b><h:outputText value="#{langueBean.getMsg('candidat.used_for')}" style="margin-top: 14px;"/></b>

                                <!-- pour les synonymes -->
                                <div class="grid ui-fluid ui-inputgroup" style="height: 35px; margin-bottom: 3px">
                                    <p:inputText id="enployerPourId" value="#{candidatBean.employePour}" />
                                    <p:commandButton icon="pi pi-check" styleClass="ui-button-success" style="width: 30px"
                                                     action="#{candidatBean.addSynonyme()}" />
                                </div>

                                <div class="card mb-4 py-3 border-left-success">
                                    <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                                        <p:dataView var="synonyme" value="#{candidatBean.candidatSelected.employePourList}"
                                                    emptyMessage="#{langueBean.getMsg('rightbody.concept.no_value')}...">
                                            <p:dataViewListItem>
                                                <div class="product-list-item" style="display: flex; justify-content: space-between;">
                                                    <div class="product-list-detail">
                                                        <h:outputText value="#{synonyme}" style="font-weight: bold"/>
                                                    </div>
                                                    <div class="product-list-detail">
                                                        <p:commandLink title="Supprimer le synonyme : #{synonyme}"
                                                                       process="@this" ajax="true" update="tabViewCandidat:containerIndexCandidat:candidatSynonym"
                                                                       action="#{candidatBean.removeSynonyme(synonyme)}">
                                                            <h:outputText styleClass="ui-icon pi pi-times" style="margin:0 auto;"/>
                                                        </p:commandLink>
                                                    </div>
                                                </div>
                                            </p:dataViewListItem>
                                        </p:dataView>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </h:panelGroup>
                </div>
            </div>
            
            <div class="row">
                <div class="col-6">
                    <h:panelGroup id="candidatBT" >
                        <div class="card mb-4 py-3 border-left-success" style="margin-top: 10px; background: #ECF8F1">
                            <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 11px; margin-right: 11px">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.generic_term')}" style="font-size: 14px;" /></b>

                                <!-- pour les relations BT -->
                                <p:autoComplete id="autoBroaderLink" value="#{candidatBean.termesGeneriqueTmp}"
                                                multiple="true" var="values" forceSelection="true" style="width: 100%;"
                                                completeMethod="#{candidatBean.searchTermeGenerique}" minQueryLength="1" scrollHeight="300"
                                                itemLabel="#{values.value}" itemValue="#{values}" converter="searchConverterIdValue">
                                    <p:ajax event="itemSelect" listener="#{candidatBean.onTraductionGenericSelect}" update="messageIndex"/>
                                    <p:column style="font-size: 12px;">
                                        <h:outputText style="vertical-align: middle; margin-left: .5rem" title="#{values.id}" value="#{values.value}"/>
                                    </p:column>
                                </p:autoComplete>

                                <div class="card mb-4 py-3 border-left-success">
                                    <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                                        <p:dataView var="terme" value="#{candidatBean.candidatSelected.termesGenerique}"
                                                    emptyMessage="#{langueBean.getMsg('rightbody.concept.no_value')}...">
                                            <p:dataViewListItem>
                                                <div class="product-list-item" style="display: flex; justify-content: space-between;">
                                                    <div class="product-list-detail">
                                                        <h:outputText value="#{terme.value}" style="font-weight: bold"/>
                                                    </div>
                                                    <div class="product-list-detail">
                                                        <p:commandLink title="Supprimer le terme : #{terme.value}"
                                                                       action="#{candidatBean.removeGenericTerm(terme)}"
                                                                       update="tabViewCandidat:containerIndexCandidat:candidatBT" ajax="true" process="@this">
                                                            <h:outputText styleClass="ui-icon pi pi-times" style="margin:0 auto;"/>
                                                        </p:commandLink>
                                                    </div>
                                                </div>
                                            </p:dataViewListItem>
                                        </p:dataView>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:panelGroup>
                </div>
                <div class="col-6">
                    <h:panelGroup id="candidatRT" >
                        <div class="card mb-4 py-3 border-left-success" style="margin-top: 10px; background: #ECF8F1">
                            <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 11px; margin-right: 11px">

                                <!-- pour les relations RT -->
                                <b><h:outputText value="#{langueBean.getMsg('candidat.associeted_terms')}" style="font-size: 14px;" /></b>

                                <p:autoComplete id="autoRelatedLink" value="#{candidatBean.termesAssociesTmp}"
                                                multiple="true" var="values" forceSelection="true" style="width: 100%"
                                                completeMethod="#{candidatBean.searchTermeAssocie}" minQueryLength="1" scrollHeight="300"
                                                itemLabel="#{values.value}" itemValue="#{values}" converter="searchConverterIdValue" >
                                    <p:ajax event="itemSelect" listener="#{candidatBean.onTraductionAssocieSelect}" update="messageIndex"/>
                                    <p:column  style="font-size: 12px;">
                                        <h:outputText title="#{values.id}" value="#{values.value}" />
                                    </p:column>
                                </p:autoComplete>

                                <div class="card mb-4 py-3 border-left-success">
                                    <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                                        <p:dataView var="terme" value="#{candidatBean.candidatSelected.termesAssocies}"
                                                    emptyMessage="#{langueBean.getMsg('rightbody.concept.no_value')} ...">
                                            <p:dataViewListItem>
                                                <div class="product-list-item" style="display: flex; justify-content: space-between;">
                                                    <div class="product-list-detail">
                                                        <h:outputText value="#{terme.value}" style="font-weight: bold"/>
                                                    </div>
                                                    <div class="product-list-detail">
                                                        <p:commandLink title="Supprimer le terme : #{terme.value}"
                                                                       action="#{candidatBean.removeAssociesTerm(terme)}"
                                                                       update="tabViewCandidat:containerIndexCandidat:candidatRT" ajax="true" process="@this">
                                                            <h:outputText styleClass="ui-icon pi pi-times" style="margin:0 auto;"/>
                                                        </p:commandLink>
                                                    </div>
                                                </div>
                                            </p:dataViewListItem>
                                        </p:dataView>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:panelGroup>
                </div>
            </div>

            <!-- Validation et enregistrement des nouvelles données ci-dessus -->
            <div class="row" style="margin-top: 20px">
                <div class="col-12" style="text-align: right" >
                    <p:commandButton value="#{langueBean.getMsg('candidat.close')}" style="margin-right: 10px"
                                     icon="fas fa-undo-alt" styleClass="ui-button-secondary button"
                                     actionListener="#{candidatBean.setIsListCandidatsActivate(true)}"
                                     action="#{candidatBean.getAllCandidatsByThesoAndLangue()}"
                                     update="tabViewCandidat"/>

                    <p:commandButton value="#{langueBean.getMsg('candidat.save')}"
                                     icon="pi pi-check"
                                     styleClass="ui-button-success" action="#{candidatBean.saveConcept()}"
                                     update="messageIndex" />

                </div>
            </div>
        </div>
    </div>

    <!-- pour les 2 sections ci-dessous, l'enregistrement des données est automatique -->
    <h:panelGroup id="candidateInfos" rendered="#{!candidatBean.isNewCandidatActivate()}" style="margin: 10px;" >

        <!-- gestion des notes -->
        <div class="card mb-4 py-3 border-left-success" style="margin-top: 10px;">
            <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                <!-- ligne PrefLabel -->
                <div class="row" style="margin-bottom: 10px">
                    <div class="col-12">
                        <b>
                            <p:commandLink value="#{langueBean.getMsg('rightbody.concept.add_note')}" actionListener="#{noteBeanCandidat.reset()}"
                                           oncomplete="PF('newNote').show();" update="idNewNote" ajax="true" process="@this">
                                <a class="fas fa-plus-circle" style="color: #f47b2a"  />
                            </p:commandLink>
                        </b>
                    </div>
                </div>

                <h:panelGroup rendered="#{candidatBean.candidatSelected.nodeNotes == null || candidatBean.candidatSelected.nodeNotes.size() == 0}">
                    <div class="row">
                        <div class="col-12">
                            <h:outputText value="Aucune note pour le moment ..." style="color: grey; font-style: italic"/>
                        </div>
                    </div>
                </h:panelGroup>

                <h:panelGroup rendered="#{candidatBean.candidatSelected.nodeNotes.size() > 0}" >
                    <div class="row" style="font-size: 12px; color: #601e18; margin-bottom: 5px">
                        <div class="col-3">
                            <b><h:outputText value="#{langueBean.getMsg('candidat.value')}"/></b>
                        </div>
                        <div class="col-2">
                            <b><h:outputText value="#{langueBean.getMsg('statistique.user')}"/></b>
                        </div>
                        <div class="col-2">
                            <b><h:outputText value="#{langueBean.getMsg('statistique.type')}"/></b>
                        </div>
                        <div class="col-2">
                            <b><h:outputText value="#{langueBean.getMsg('candidat.language')}"/></b>
                        </div>
                        <div class="col-1">
                            <b><h:outputText value="#{langueBean.getMsg('candidat.edit')}"/></b>
                        </div>
                        <div class="col-1">
                            <b><h:outputText value="#{langueBean.getMsg('candidat.remove')}"/></b>
                        </div>
                        <div class="col-1">
                            <b><h:outputText value="#{langueBean.getMsg('candidate.vote')}"/></b>
                        </div>
                    </div>

                    <ui:repeat id="listNotes" var="note" value="#{candidatBean.candidatSelected.nodeNotes}" >
                        <div class="row" style="padding-top: 5px; background-color: #{viewEditionBean.getAlternateColor(candidatBean.candidatSelected.nodeNotes.indexOf(note))}"
                             tooltip="Ajouté par #{candidatBean.getUserName(note.idUser)}">
                            <div class="col-3" >
                                <h:outputText value="#{note.lexicalvalue}" escape="false" style="font-size: 14px;"/>
                            </div>
                            <div class="col-2" >
                                <h:outputText value="#{candidatBean.getUserName(note.idUser)}" escape="false" style="font-size: 14px;"/>
                            </div>
                            <div class="col-2" >
                                <h:outputText value="#{note.notetypecode}" escape="false" style="font-size: 14px;"/>
                            </div>
                            <div class="col-2" >
                                <img src="#{conceptView.getFlagFromCodeLang(note.lang)}" width="25" height="20"/>
                                <h:outputLabel value=" (#{note.lang})" style="font-size: 14px; margin-left: 10px;" />
                            </div>
                            <div class="col-1" style="margin-top: -5px">
                                <p:commandButton rendered="#{candidatBean.candidatSelected.userId == note.idUser}"
                                                 styleClass="rounded-button ui-button-outlined" icon="fas fa-pen" process="@this"
                                                 actionListener="#{noteBeanCandidat.resetEditNode(note)}" update="editNoteForm"
                                                 oncomplete="PF('editNote').show();" style="color: #43B572"/>

                            </div>
                            <div class="col-1" style="margin-top: -5px">
                                <p:commandButton rendered="#{candidatBean.candidatSelected.userId == note.idUser}" icon="pi pi-trash"
                                                 styleClass="rounded-button ui-button-danger ui-button-outlined" process="@this" ajax="true"
                                                 actionListener="#{noteBeanCandidat.setSelectedNodeNote(note)}" update="idDeleteNote"
                                                 oncomplete="PF('deleteNote').show();" />
                            </div>
                            <div class="col-1" style="margin-top: -5px">
                                <p:commandButton rendered="#{note.voted}" actionListener="#{candidatBean.addNoteVote(note)}"
                                                 update="tabViewCandidat messageIndex" ajax="true" process="@this"
                                                 styleClass="rounded-button ui-button-outlined"
                                                 icon="fas fa-thumbs-up" style="color: #E45C00; "/>

                                <p:commandButton rendered="#{!note.voted}" update="tabViewCandidat messageIndex"
                                                 icon="fas fa-thumbs-down" styleClass="rounded-button ui-button-outlined"
                                                 actionListener="#{candidatBean.addNoteVote(note)}" ajax="true" process="@this"
                                                 style="color: #666666"/>
                            </div>
                        </div>
                    </ui:repeat>
                </h:panelGroup>
            </div>
        </div>

        <div class="card mb-4 py-3 border-left-success" style="margin-top: 20px;">
            <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                <!-- gestion des traductions -->
                <div class="row">
                    <div class="col-12">
                        <b>
                            <p:commandLink value="#{langueBean.getMsg('rightbody.concept.add_traduction')}" update="idNewTraduction newTraductionForm"
                                           oncomplete="PF('newTraduction').show();" actionListener="#{traductionService.init()}">
                                <a class="fas fa-plus-circle" style="color: #f47b2a" />
                            </p:commandLink>
                        </b>
                    </div>
                </div>

                <h:panelGroup rendered="#{candidatBean.candidatSelected.traductions.size() == 0}" style="margin-top: 10px">
                    <div class="row">
                        <div class="col-12">
                            <h:outputText  value="#{langueBean.getMsg('rightbody.concept.no_value')} ..." style="color: grey; font-style: italic " />
                        </div>
                    </div>
                </h:panelGroup>

                <h:panelGroup rendered="#{candidatBean.candidatSelected.traductions.size() > 0}" style="margin-top: 10px">
                    <div class="row" style="font-size: 12px; color: #601e18; margin-bottom: 5px">
                        <div class="col-2" style="margin-top: -2px;">
                            <b><h:outputText value="#{langueBean.getMsg('candidat.language')}"/></b>
                        </div>
                        <div class="col-6">
                            <b><h:outputText value="#{langueBean.getMsg('candidat.traduction')}"/></b>
                        </div>
                        <div class="col-2">
                            <b><h:outputText value="#{langueBean.getMsg('candidat.edit')}"/></b>
                        </div>
                        <div class="col-2">
                            <b><h:outputText value="#{langueBean.getMsg('candidat.remove')}"/></b>
                        </div>
                    </div>

                    <ui:repeat id="listTraduction" var="traduction" value="#{candidatBean.candidatSelected.traductions}">
                        <div class="row" style="background-color: #{viewEditionBean.getAlternateColor(candidatBean.candidatSelected.traductions.indexOf(traduction))};
                             padding-top: 5px" >
                            
                            <div class="col-2" style="margin-top: -2px;">
                                <img src="#{conceptView.getDrapeauImgLocal(traduction.codePays)}" width="25" height="20"/>
                                <h:outputLabel value=" (#{traduction.langue})" style="font-size: 14px; margin-left: 10px;" />
                            </div>
                            <div class="col-6" style="margin-top: -2px;">
                                <h:outputText value="#{traduction.traduction}" style="font-size: 14px;"/>
                            </div>
                            <div class="col-2" style="margin-top: -5px">
                                <p:commandButton icon="fas fa-pen"
                                                 style="color: #43B572"
                                                 update=":manage-traduction-content"
                                                 oncomplete="PF('editTraduction').show();"
                                                 actionListener="#{traductionService.init(traduction)}" process="@this"
                                                 styleClass="rounded-button ui-button-outlined">
                                    <p:resetInput target=":manage-traduction-content"/>
                                </p:commandButton>
                            </div>

                            <div class="col-2" style="margin-top: -5px">
                                <p:commandButton icon="pi pi-trash" styleClass="rounded-button ui-button-danger ui-button-outlined"
                                                 actionListener="#{traductionService.init(traduction)}" update="confirmDeleteForm"
                                                 oncomplete="PF('confirmDeleteTraduction').show();" />
                            </div>
                        </div>
                    </ui:repeat>
                </h:panelGroup>
            </div>
        </div>

        <div class="card mb-4 py-3 border-left-success" style="margin-top: 20px;">
            <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                <!-- gestion des traductions -->
                <div class="row">
                    <div class="col-12">
                        <b>
                            <p:commandLink value="#{langueBean.getMsg('alignment.addNewAlignment')}" update="idAddManualAlignment"
                                           oncomplete="PF('addManualAlignment').show();" actionListener="#{alignmentManualBean.reset()}">
                                <a class="fas fa-plus-circle" style="color: #f47b2a" />
                            </p:commandLink>
                        </b>
                    </div>
                </div>

                <h:panelGroup rendered="#{candidatBean.candidatSelected.alignments.size() == 0}" style="margin-top: 10px">
                    <div class="row">
                        <div class="col-12">
                            <h:outputText  value="#{langueBean.getMsg('rightbody.concept.no_value')} ..." style="color: grey; font-style: italic " />
                        </div>
                    </div>
                </h:panelGroup>

                <h:panelGroup id="alignemnts" rendered="#{candidatBean.candidatSelected.alignments.size() > 0}" style="margin-top: 10px">
                    <div class="row" style="font-size: 12px; color: #601e18; margin-bottom: 5px">
                        <div class="col-3" style="margin-top: -2px;">
                            <b><h:outputText value="Type"/></b>
                        </div>
                        <div class="col-5">
                            <b><h:outputText value="URL"/></b>
                        </div>
                        <div class="col-2">
                            <b><h:outputText value="Modifier"/></b>
                        </div>
                        <div class="col-2">
                            <b><h:outputText value="Supprimer"/></b>
                        </div>
                    </div>

                    <ui:repeat id="listAlignement" var="alignment" value="#{candidatBean.candidatSelected.alignments}">
                        <div class="row" style="background-color: #{viewEditionBean.getAlternateColor(candidatBean.candidatSelected.alignments.indexOf(alignment))}; padding-top: 5px" >
                            <div class="col-3" style="margin-top: -2px;">
                                <h:outputText value="#{alignment.alignmentLabelType}" style="font-size: 14px;"/>
                            </div>
                            <div class="col-5" style="margin-top: -2px;">
                                <h:outputText value="#{alignment.uri_target} (#{alignment.thesaurus_target})" style="font-size: 14px;"/>
                            </div>
                            <div class="col-2" style="margin-top: -5px">
                                <p:commandButton icon="fas fa-pen"
                                                 style="color: #43B572"
                                                 actionListener="#{candidatBean.setAlignementSelected(alignment)}"
                                                 oncomplete="PF('editManualAlignment').show();"
                                                 process="@this"
                                                 update="tabViewCandidat:containerIndexCandidat:idEditManualAlignment"
                                                 styleClass="rounded-button ui-button-outlined" />
                            </div>

                            <div class="col-2" style="margin-top: -5px">
                                <p:commandButton icon="pi pi-trash" styleClass="rounded-button ui-button-danger ui-button-outlined"
                                                 actionListener="#{candidatBean.setAlignementSelected(alignment)}"
                                                 update="tabViewCandidat:containerIndexCandidat:idConfirmDeleteAlignement"
                                                 oncomplete="PF('confirmDeleteAlignement').show();" />
                            </div>
                        </div>
                    </ui:repeat>
                </h:panelGroup>
            </div>
        </div>
        <div class="card mb-4 py-3 border-left-success" style="margin-top: 10px;">
            <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 11px; margin-right: 11px">
                <ui:include src="../candidat/candidatDiscussion.xhtml" />
            </div>
        </div>



    </h:panelGroup>




    <p:dialog id="idEditManualAlignment" header="#{langueBean.getMsg('rightbody.concept.add_alignment_manual')}"
              widgetVar="editManualAlignment" width="450" showEffect="fade"
              modal="true" resizable="false" position="top" style="margin-top: 30px" >
        <h:form>
            <p:defaultCommand target="editAlignementManuelBtn" />

            <div class="row">
                <div class="col-12">
                    <h:outputText value="#{langueBean.getMsg('rightbody.conceptdialog.term')} : " />
                    <h:outputText value="#{conceptView.nodeConcept.term.lexical_value}" style="color: #C63632;" />
                </div>
            </div>

            <div class="row" style="margin-top: 5px">
                <div class="col-5">
                    <p:outputLabel value="#{langueBean.getMsg('rightbody.conceptdialog.equivalence_type')} : " />
                </div>
                <div class="col-7">
                    <p:selectOneMenu value="#{candidatBean.alignementSelected.alignement_id_type}"
                                     style="font-size: 12px; background: white; border-color: #43B572; width: 100%">
                        <f:selectItems value="#{alignmentManualBean.nodeAlignmentTypes}" var="types"
                                       itemLabel="#{types.label} (#{types.labelSkos})" itemValue="#{types.id}"/>
                    </p:selectOneMenu>
                </div>
            </div>

            <div class="row" style="margin-top: 5px">
                <div class="col-5">
                    <p:outputLabel value="#{langueBean.getMsg('rightbody.conceptdialog.distant_uri')} : " />
                </div>
                <div class="col-7">
                    <p:inputText value="#{candidatBean.alignementSelected.uri_target}" style="width: 100%" />
                </div>
            </div>

            <div class="row" style="margin-top: 5px">
                <div class="col-5">
                    <p:outputLabel value="#{langueBean.getMsg('rightbody.conceptdialog.source_name')} : " />
                </div>
                <div class="col-7">
                    <p:inputText value="#{candidatBean.alignementSelected.thesaurus_target}" style="width: 100%" />
                </div>
            </div>

            <div style="width: 100%; text-align: right; margin-top: 15px; margin-bottom: 5px;">
                <p:commandButton value="#{langueBean.getMsg('candidat.close')}" style="margin-right: 10px"
                                 icon="fas fa-undo-alt" styleClass="ui-button-secondary button"
                                 actionListener="PF('addManualAlignment').hide();" update="tabViewCandidat"/>

                <p:commandButton id="editAlignementManuelBtn" value="#{langueBean.getMsg('btnValidate')}"
                                 update="tabViewCandidat messageIndex"
                                 oncomplete="PF('addManualAlignment').hide();"
                                 icon="pi pi-check" styleClass="ui-button-success" ajax="true" process="@form"
                                 actionListener="#{candidatBean.updateAlignement()}" />
            </div>
        </h:form>
    </p:dialog>

    <p:dialog id="idConfirmDeleteAlignement" header="Confirmer la suppression" widgetVar="confirmDeleteAlignement"
              width="450" showEffect="fade" modal="true" resizable="false" position="top" style="margin-top: 30px" >

        <h:form id="confirmDeleteAlignementForm">

            <div class="row">
                <div class="col-12">
                    <h:outputText value="Voulez-vous supprimer l'alignement : " style="font-weight: bold;"/>
                </div>
            </div>

            <div class="row" style="margin-top: 10px">
                <div class="col-12">
                    <h:outputText value="#{candidatBean.alignementSelected.alignmentLabelType}
                                  : #{candidatBean.alignementSelected.thesaurus_target}"
                                  style="font-size: 13px; color: #C63632;"/>
                </div>
            </div>

            <div class="row" style="margin-top: 10px">
                <div class="col-12">
                    <h:outputText value="La suppression est définitive !!" style="font-size: 13px; color: black;"/>
                </div>
            </div>

            <div style="width: 100%; text-align: right; margin-top: 5px; margin-bottom: 5px;">
                <p:commandButton title="Fermer" class="btn btn-secondary" style="margin-right: 10px" ajax="true"
                                 actionListener="PF('confirmDeleteAlignement').hide();" update="confirmDeleteAlignementForm"/>

                <p:commandButton class="btn btn-danger" title="Supprimer" ajax="true" process="@this"
                                 oncomplete="PF('confirmDeleteAlignement').hide();"
                                 update="tabViewCandidat messageIndex"
                                 actionListener="#{candidatBean.deleteAlignement()}" />
            </div>
        </h:form>
    </p:dialog>

    <p:dialog id="idAddManualAlignment" header="#{langueBean.getMsg('rightbody.concept.add_alignment_manual')}"
              widgetVar="addManualAlignment" width="450" showEffect="fade"
              modal="true" resizable="false" position="top" style="margin-top: 30px" >
        <h:form>
            <p:defaultCommand target="addAlignementManuelBtn" />

            <div class="row">
                <div class="col-12">
                    <h:outputText value="#{langueBean.getMsg('rightbody.conceptdialog.term')} : " />
                    <h:outputText value="#{conceptView.nodeConcept.term.lexical_value}" style="color: #C63632;" />
                </div>
            </div>

            <div class="row" style="margin-top: 5px">
                <div class="col-5">
                    <p:outputLabel value="#{langueBean.getMsg('rightbody.conceptdialog.equivalence_type')} : " />
                </div>
                <div class="col-7">
                    <p:selectOneMenu value="#{alignmentManualBean.manualAlignmentType}"
                                     style="font-size: 12px; background: white; border-color: #43B572; width: 100%">
                        <f:selectItems value="#{alignmentManualBean.nodeAlignmentTypes}" var="types"
                                       itemLabel="#{types.label} (#{types.labelSkos})" itemValue="#{types.id}"/>
                    </p:selectOneMenu>
                </div>
            </div>

            <div class="row" style="margin-top: 5px">
                <div class="col-5">
                    <p:outputLabel value="#{langueBean.getMsg('rightbody.conceptdialog.distant_uri')} : " />
                </div>
                <div class="col-7">
                    <p:inputText value="#{alignmentManualBean.manualAlignmentUri}" style="width: 100%" />
                </div>
            </div>

            <div class="row" style="margin-top: 5px">
                <div class="col-5">
                    <p:outputLabel value="#{langueBean.getMsg('rightbody.conceptdialog.source_name')} : " />
                </div>
                <div class="col-7">
                    <p:inputText value="#{alignmentManualBean.manualAlignmentSource}" style="width: 100%" />
                </div>
            </div>

            <div style="width: 100%; text-align: right; margin-top: 15px; margin-bottom: 5px;">
                <p:commandButton value="#{langueBean.getMsg('candidat.close')}" style="margin-right: 10px"
                                 icon="fas fa-undo-alt" styleClass="ui-button-secondary button"
                                 actionListener="PF('addManualAlignment').hide();" update="tabViewCandidat"/>

                <p:commandButton id="addAlignementManuelBtn" value="#{langueBean.getMsg('btnValidate')}"
                                 update="tabViewCandidat messageIndex"
                                 oncomplete="PF('addManualAlignment').hide();"
                                 icon="pi pi-check" styleClass="ui-button-success" ajax="true" process="@form"
                                 actionListener="#{alignmentManualBean.addManualAlignement(candidatBean.candidatSelected.idConcepte, false)}" />
            </div>
        </h:form>
    </p:dialog>
</ui:fragment>

