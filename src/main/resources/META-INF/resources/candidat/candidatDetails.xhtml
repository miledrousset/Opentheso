<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:f="http://xmlns.jcp.org/jsf/core"
             xmlns:p="http://primefaces.org/ui">

    <style>
        .ui-dataview-header.ui-widget-header.ui-helper-clearfix.ui-corner-top {
            display: none;
        }

        body .ui-dataview.ui-dataview-list .ui-dataview-row {
            border: solid #e9ecef;
            border-width: 0 0 0 0;
        }
    </style>

    <div style="padding-left: 20px; padding-right: 20px">
        <div class="row">
            <div class="col-6">
                <i class="pi pi-arrow-left" style="color: #F47B2A; margin-right: 5px; margin-left: 15px"></i>
                <p:commandLink value="#{langueBean.getMsg('candidat.return')}"
                               update="tabViewCandidat" style="color: #F47B2A" ajax="true" process="@this"
                               action= "#{candidatBean.getAllCandidatsByThesoAndLangue()}"
                               actionListener="#{candidatBean.setIsListCandidatsActivate(true)}" />
            </div>
            <div class="col-6" style="text-align: right">
                <p:commandButton value="#{candidatBean.getCreatedByBtnTitle()}"
                                 rendered="#{!candidatBean.isNewCandidatActivate()}"
                                 icon="fas fa-sync" ajax="true" update="tabViewCandidat"
                                 styleClass="ui-button-success"
                                 actionListener="#{candidatBean.showCandidatSelected(candidatBean.candidatSelected)}"/>
            </div>
        </div>

        <div class="card mb-4 py-3 border-left-success" style="padding-left: 20px; padding-right: 20px; margin-top: 20px">
            <!-- prefLabel -->
            <h:panelGroup id="vote" class="grid ui-fluid">
                <b><h:outputText value="#{langueBean.getMsg('candidat.title')} *" style="margin-top: 14px;"/></b>
                <div class="grid ui-fluid ui-inputgroup" style="height: 35px; margin-bottom: 3px">
                    <h:panelGroup rendered="#{!candidatBean.isNewCandidatActivate()}">
                        <p:inputText id="inputTextCandidate" readonly="#{!candidatBean.isMyCandidate() }"
                                     value="#{candidatBean.candidatSelected.nomPref}">
                            <p:ajax event="keyup" listener="#{candidatBean.changeStateOfLabel()}"
                                    update="validateBtn"/>
                        </p:inputText>
                        <p:tooltip for="inputTextCandidate" value="#{langueBean.getMsg('candidat.term.no_edit')}"
                                   showDelay="1000" position="top"/>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{candidatBean.isNewCandidatActivate()}">
                        <p:inputText rendered="#{candidatBean.isNewCandidatActivate()}" value="#{candidatBean.candidatSelected.nomPref}" />
                    </h:panelGroup>

                    <p:commandButton rendered="#{candidatBean.candidatSelected.voted}"
                                     actionListener="#{candidatBean.addVote()}" update="vote"
                                     icon="fas fa-thumbs-up" style="color : #FFF; height: 35px; border: none;"/>

                    <p:commandButton rendered="#{!candidatBean.candidatSelected.voted}"
                                     actionListener="#{candidatBean.addVote()}" update="vote"
                                     icon="fas fa-thumbs-down" style="background-color: #888; border: none; color: #FFF;height: 35px"/>
                    
                    
                    <p:commandButton id="validateBtn" rendered="#{candidatBean.isMyCandidate() and !candidatBean.isNewCandidatActivate()}"
                                     disabled="#{!candidatBean.isModifiedLabel}"
                                     update="vote"
                                     action="#{candidatBean.updateCandidateLabel()}"
                                     value="#{langueBean.getMsg('btnValidate')}" styleClass="ui-button-success" icon="fa-solid fa-save"
                                     ajax="true" process="@this" style="margin-left: 20px"/>                    
                    
                </div>
            </h:panelGroup>

            <!-- pour la première définition qui est obligatoire-->
            <h:panelGroup rendered="#{candidatBean.isNewCandidatActivate()}" style="margin-top: 10px">
                <div class="row">
                    <div class="col-12 md:col-4">
                        <b><h:outputText value="#{langueBean.getMsg('candidat.definition')} *" style="font-size: 14px; "/></b>
                    </div>
                    <div class="col-12 md:col-4">
                        <div class="ui-inputgroup">
                            <p:textEditor id="textEditorDef" widgetVar="DefinitionNew"
                                          value="#{candidatBean.definition}" allowLinks="true"
                                          secure="false" height="100px" style="font-size: 12px; color: black; border-color: #43B572; width: 100%;"
                                          placeholder="#{langueBean.getMsg('rightbody.conceptdialog.type_value')}" />
                        </div>
                    </div>
                </div>

                <!-- Validation et enregistrement des nouvelles données ci-dessus -->
                <div class="row">
                    <div class="col-12" style="text-align: right; margin-top: 10px" >
                        <p:commandButton value="#{langueBean.getMsg('candidat.close')}" style="margin-right: 10px"
                                         icon="fas fa-undo-alt" styleClass="ui-button-secondary button"
                                         actionListener="#{candidatBean.setIsListCandidatsActivate(true)}"
                                         action="#{candidatBean.getAllCandidatsByThesoAndLangue()}"
                                         update="tabViewCandidat"/>

                        <p:commandButton value="#{langueBean.getMsg('candidat.create')}"
                                         icon="pi pi-check"
                                         styleClass="ui-button-success" action="#{candidatBean.saveConcept()}"
                                         update="tabViewCandidat " />

                    </div>
                </div>
            </h:panelGroup>
        </div>

        <h:panelGroup rendered="#{!candidatBean.isNewCandidatActivate()}">
            <div class="card mb-4 py-3 border-left-success" style="padding-left: 20px; padding-right: 20px; margin-top: 20px">
                <!-- collection -->
                <div class="row">
                    <div class="col-6">
                        <h:panelGroup id="candidatCollection">
                            <div class="card mb-4 py-3 border-left-success" style="background: #ECF8F1; padding: 20px;">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.domaine')}" style="font-size: 14px;"/></b>

                                <p:autoComplete value="#{candidatBean.collectionTemps}" multiple="true" style="width: 100%; margin-bottom: 3px"
                                                var="values" forceSelection="true" completeMethod="#{candidatBean.searchCollection}"
                                                minQueryLength="1" itemLabel="#{values.value}" itemValue="#{values}"
                                                converter="searchConverterIdValue" scrollHeight="300">
                                    <p:ajax event="itemSelect" listener="#{candidatBean.addCollection}"/>
                                    <p:column>
                                        <h:outputText title="#{values.value}" value="#{values.value}"/>
                                    </p:column>
                                </p:autoComplete>

                                <div class="card mb-4 py-3 border-left-success">
                                    <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                                        <p:dataView id="collectionList" var="collection"
                                                    value="#{candidatBean.candidatSelected.collections}"
                                                    emptyMessage="#{langueBean.getMsg('rightbody.concept.no_value')}">
                                            <p:dataViewListItem>
                                                <div class="product-list-item" style="display: flex; justify-content: space-between;">
                                                    <div class="product-list-detail">
                                                        <h:outputText value="#{collection.value}" style="font-weight: bold"/>
                                                    </div>
                                                    <div class="product-list-detail">
                                                        <p:commandLink title="#{langueBean.getMsg('candidat.delete_collection')} : #{collection.value}"
                                                                       action="#{candidatBean.removeCollection(collection)}"
                                                                       update="@this" ajax="true" process="@this">
                                                            <h:outputText styleClass="ui-icon pi pi-times" style="margin:0 auto;"/>
                                                        </p:commandLink>
                                                    </div>
                                                </div>
                                            </p:dataViewListItem>
                                        </p:dataView>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                    </div>

                    <div class="col-6">
                        <h:panelGroup id="candidatSynonym" >
                            <div class="card mb-4 py-3 border-left-success" style="background: #ECF8F1; padding: 20px;">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.used_for')}" style="margin-top: 14px;"/></b>

                                <!-- pour les synonymes -->
                                <div class="grid ui-fluid ui-inputgroup" style="height: 35px; margin-bottom: 3px">
                                    <p:inputText id="enployerPourId" value="#{candidatBean.employePour}" />
                                    <p:commandButton icon="pi pi-check" style="background-color: #888; border: none; color: #FFF;height: 35px"
                                                     action="#{candidatBean.addSynonyme()}" />
                                </div>

                                <div class="card mb-4 py-3 border-left-success">
                                    <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                                        <p:dataView var="synonyme" value="#{candidatBean.candidatSelected.employePourList}"
                                                    emptyMessage="#{langueBean.getMsg('rightbody.concept.no_value')}">
                                            <p:dataViewListItem>
                                                <div class="product-list-item" style="display: flex; justify-content: space-between;">
                                                    <div class="product-list-detail">
                                                        <h:outputText value="#{synonyme}" style="font-weight: bold"/>
                                                    </div>
                                                    <div class="product-list-detail">
                                                        <p:commandLink title="#{langueBean.getMsg('candidat.delete_synonym')} : #{synonyme}"
                                                                       process="@this" ajax="true" update="tabViewCandidat:containerIndexCandidat:candidatSynonym"
                                                                       action="#{candidatBean.removeSynonyme(synonyme)}">
                                                            <h:outputText styleClass="ui-icon pi pi-times" style="margin:0 auto;"/>
                                                        </p:commandLink>
                                                    </div>
                                                </div>
                                            </p:dataViewListItem>
                                        </p:dataView>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <h:panelGroup id="candidatBT" >
                            <div class="card mb-4 py-3 border-left-success" style="background: #ECF8F1; padding: 20px; margin-top: 10px">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.generic_term')}" style="font-size: 14px;" /></b>

                                <!-- pour les relations BT -->
                                <p:autoComplete id="autoBroaderLink" value="#{candidatBean.termesGeneriqueTmp}"
                                                multiple="true" var="values" forceSelection="true" style="width: 100%; margin-bottom: 3px"
                                                completeMethod="#{candidatBean.searchTermeGenerique}" minQueryLength="1" scrollHeight="300"
                                                itemLabel="#{values.value}" itemValue="#{values}" converter="searchConverterIdValue">

                                    <p:ajax event="itemSelect" listener="#{candidatBean.addTraduction}" update="messageIndex"/>

                                    <p:column style="font-size: 12px;">
                                        <h:outputText style="vertical-align: middle; margin-left: .5rem" title="#{values.id}" value="#{values.value}"/>
                                    </p:column>
                                </p:autoComplete>

                                <div class="card mb-4 py-3 border-left-success">
                                    <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                                        <p:dataView var="terme" value="#{candidatBean.candidatSelected.termesGenerique}"
                                                    emptyMessage="#{langueBean.getMsg('rightbody.concept.no_value')}">
                                            <p:dataViewListItem>
                                                <div class="product-list-item" style="display: flex; justify-content: space-between;">
                                                    <div class="product-list-detail">
                                                        <h:outputText value="#{terme.value}" style="font-weight: bold"/>
                                                    </div>
                                                    <div class="product-list-detail">
                                                        <p:commandLink title="#{langueBean.getMsg('candidat.delete_term')} : #{terme.value}"
                                                                       action="#{candidatBean.removeGenericTerm(terme)}"
                                                                       update="tabViewCandidat:containerIndexCandidat:candidatBT" ajax="true" process="@this">
                                                            <h:outputText styleClass="ui-icon pi pi-times" style="margin:0 auto;"/>
                                                        </p:commandLink>
                                                    </div>
                                                </div>
                                            </p:dataViewListItem>
                                        </p:dataView>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                    </div>
                    <div class="col-6">
                        <h:panelGroup id="candidatRT" >
                            <div class="card mb-4 py-3 border-left-success" style="background: #ECF8F1; padding: 20px; margin-top: 10px">
                                <!-- pour les relations RT -->
                                <b><h:outputText value="#{langueBean.getMsg('candidat.associeted_terms')}" style="font-size: 14px;" /></b>

                                <p:autoComplete value="#{candidatBean.termesAssociesTmp}"
                                                multiple="true" var="values" forceSelection="true" style="width: 100%"
                                                completeMethod="#{candidatBean.searchTermeAssocie}" minQueryLength="1" scrollHeight="300"
                                                itemLabel="#{values.value}" itemValue="#{values}" converter="searchConverterIdValue" >

                                    <p:ajax event="itemSelect" listener="#{candidatBean.addTraductionAssocieSelect}" update="messageIndex"/>
                                    <p:column  style="font-size: 12px;">
                                        <h:outputText title="#{values.id}" value="#{values.value}" />
                                    </p:column>
                                </p:autoComplete>

                                <div class="card mb-4 py-3 border-left-success">
                                    <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                                        <p:dataView var="terme" value="#{candidatBean.candidatSelected.termesAssocies}"
                                                    emptyMessage="#{langueBean.getMsg('rightbody.concept.no_value')}">
                                            <p:dataViewListItem>
                                                <div class="product-list-item" style="display: flex; justify-content: space-between;">
                                                    <div class="product-list-detail">
                                                        <h:outputText value="#{terme.value}" style="font-weight: bold"/>
                                                    </div>
                                                    <div class="product-list-detail">
                                                        <p:commandLink title="#{langueBean.getMsg('candidat.delete_term')} : #{terme.value}"
                                                                       action="#{candidatBean.removeAssociesTerm(terme)}"
                                                                       update="tabViewCandidat:containerIndexCandidat:candidatRT" ajax="true" process="@this">
                                                            <h:outputText styleClass="ui-icon pi pi-times" style="margin:0 auto;"/>
                                                        </p:commandLink>
                                                    </div>
                                                </div>
                                            </p:dataViewListItem>
                                        </p:dataView>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                    </div>
                </div>
            </div>

            <!-- gestion des notes -->
            <div class="card mb-4 py-3 border-left-success" style="margin-top: 20px;">
                <div class="list-group" style="margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                    <!-- ligne PrefLabel -->
                    <div class="row" style="margin-bottom: 10px">
                        <div class="col-12">
                            <i class="pi pi-copy" style="color: #78261f; margin-right: 10px" />
                            <p:commandButton value="#{langueBean.getMsg('rightbody.concept.add_note')}"
                                             actionListener="#{noteBeanCandidat.reset()}"
                                             oncomplete="PF('newNote').show();"
                                             update="idNewNote"
                                             styleClass="rounded-button ui-button-outlined"
                                             style="color: #f47b2a;" />
                        </div>
                    </div>

                    <h:panelGroup rendered="#{candidatBean.candidatSelected.nodeNotes == null || candidatBean.candidatSelected.nodeNotes.size() == 0}">
                        <div class="row">
                            <div class="col-12">
                                <h:outputText value="#{langueBean.getMsg('candidat.note.no_data')}..." style="color: grey; font-style: italic"/>
                            </div>
                        </div>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{candidatBean.candidatSelected.nodeNotes.size() > 0}" >
                        <div class="row" style="font-size: 12px; color: #601e18; margin-bottom: 5px">
                            <div class="col-3">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.value')}"/></b>
                            </div>
                            <div class="col-2">
                                <b><h:outputText value="#{langueBean.getMsg('statistique.user')}"/></b>
                            </div>
                            <div class="col-2">
                                <b><h:outputText value="#{langueBean.getMsg('statistique.type')}"/></b>
                            </div>
                            <div class="col-2">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.language')}"/></b>
                            </div>
                            <div class="col-1">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.edit')}"/></b>
                            </div>
                            <div class="col-1">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.remove')}"/></b>
                            </div>
                            <div class="col-1">
                                <b><h:outputText value="#{langueBean.getMsg('candidate.vote')}"/></b>
                            </div>
                        </div>

                        <ui:repeat id="listNotes" var="note" value="#{candidatBean.candidatSelected.nodeNotes}" >
                            <div class="row" style="padding-top: 5px; background-color: #{viewEditionBean.getAlternateColor(candidatBean.candidatSelected.nodeNotes.indexOf(note))}">
                                <div class="col-3" >
                                    <h:outputText value="#{note.lexicalValue}" escape="false" style="font-size: 14px;" title="#{langueBean.getMsg('rightbody.concept.by')} #{candidatBean.getUserName(note.idUser)}"/>
                                </div>
                                <div class="col-2" >
                                    <h:outputText value="#{candidatBean.getUserName(note.idUser)}" escape="false" style="font-size: 14px;"/>
                                </div>
                                <div class="col-2" >
                                    <h:outputText value="#{candidatBean.getNoteType(note.noteTypeCode)}" escape="false" style="font-size: 14px;"/>
                                </div>
                                <div class="col-2" >
                                    <img src="#{conceptView.getFlagFromCodeLang(note.lang)}" width="25" height="20"/>
                                    <h:outputLabel value=" (#{note.lang})" style="font-size: 14px; margin-left: 10px;" />
                                </div>
                                <div class="col-1" style="margin-top: -5px">
                                    <p:commandButton rendered="#{(candidatBean.candidatSelected.userId == note.idUser) or (currentUser.hasRoleAsAdmin)}"
                                                     styleClass="rounded-button ui-button-outlined" icon="fas fa-pen" process="@this"
                                                     actionListener="#{noteBeanCandidat.resetEditNode(note)}" update="editNoteForm"
                                                     oncomplete="PF('editNote').show();" style="color: #43B572"/>

                                </div>
                                <div class="col-1" style="margin-top: -5px">
                                    <p:commandButton rendered="#{(candidatBean.candidatSelected.userId == note.idUser) or (currentUser.hasRoleAsAdmin)}" icon="pi pi-trash"
                                                     styleClass="rounded-button ui-button-danger ui-button-outlined" process="@this" ajax="true"
                                                     actionListener="#{noteBeanCandidat.setSelectedNodeNote(note)}" update="idDeleteNote"
                                                     oncomplete="PF('deleteNote').show();" />
                                </div>
                                <div class="col-1" style="margin-top: -5px">
                                    <p:commandButton rendered="#{note.voted}" actionListener="#{candidatBean.addNoteVote(note)}"
                                                     update="tabViewCandidat messageIndex" ajax="true" process="@this"
                                                     styleClass="rounded-button ui-button-outlined"
                                                     icon="fas fa-thumbs-up" style="color: #E45C00; "/>

                                    <p:commandButton rendered="#{!note.voted}" update="tabViewCandidat messageIndex"
                                                     icon="fas fa-thumbs-down" styleClass="rounded-button ui-button-outlined"
                                                     actionListener="#{candidatBean.addNoteVote(note)}" ajax="true" process="@this"
                                                     style="color: #666666"/>
                                </div>
                            </div>
                        </ui:repeat>
                    </h:panelGroup>
                </div>
            </div>

            <!-- gestion des traductions -->
            <div class="card mb-4 py-3 border-left-success" style="margin-top: 20px;">
                <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                    <!-- gestion des traductions -->
                    <div class="row">
                        <div class="col-12">
                            <i class="fa fa-language" style="color: #78261f; margin-right: 10px" />
                            <p:commandButton value="#{langueBean.getMsg('rightbody.concept.add_traduction')}"
                                             update="idNewTraduction newTraductionForm"
                                             oncomplete="PF('newTraduction').show();"
                                             actionListener="#{traductionService.init()}"
                                             styleClass="rounded-button ui-button-outlined"
                                             style="color: #f47b2a;" />
                        </div>
                    </div>

                    <h:panelGroup rendered="#{candidatBean.candidatSelected.traductions.size() == 0}" style="margin-top: 10px">
                        <div class="row">
                            <div class="col-12">
                                <h:outputText  value="#{langueBean.getMsg('rightbody.concept.no_value')} ..." style="color: grey; font-style: italic " />
                            </div>
                        </div>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{candidatBean.candidatSelected.traductions.size() > 0}" style="margin-top: 10px">
                        <div class="row" style="font-size: 12px; color: #601e18; margin-bottom: 5px">
                            <div class="col-6">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.traduction')}"/></b>
                            </div>
                            <div class="col-2" style="margin-top: -2px;">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.language')}"/></b>
                            </div>
                            <div class="col-2">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.edit')}"/></b>
                            </div>
                            <div class="col-2">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.remove')}"/></b>
                            </div>
                        </div>

                        <ui:repeat id="listTraduction" var="traduction" value="#{candidatBean.candidatSelected.traductions}">
                            <div class="row" style="background-color: #{viewEditionBean.getAlternateColor(candidatBean.candidatSelected.traductions.indexOf(traduction))};
                             padding-top: 5px" >
                                <div class="col-6" style="margin-top: -2px;">
                                    <h:outputText value="#{traduction.traduction}" style="font-size: 14px;"/>
                                </div>
                                <div class="col-2" style="margin-top: -2px;">
                                    <img src="#{conceptView.getDrapeauImgLocal(traduction.codePays)}" width="25" height="20"/>
                                    <h:outputLabel value=" (#{traduction.langue})" style="font-size: 14px; margin-left: 10px;" />
                                </div>
                                <div class="col-2" style="margin-top: -5px">
                                    <p:commandButton icon="fas fa-pen"
                                                     style="color: #43B572"
                                                     update=":manage-traduction-content"
                                                     oncomplete="PF('editTraduction').show();"
                                                     actionListener="#{traductionService.init(traduction)}" process="@this"
                                                     styleClass="rounded-button ui-button-outlined">
                                        <p:resetInput target=":manage-traduction-content"/>
                                    </p:commandButton>
                                </div>

                                <div class="col-2" style="margin-top: -5px">
                                    <p:commandButton icon="pi pi-trash" styleClass="rounded-button ui-button-danger ui-button-outlined"
                                                     actionListener="#{traductionService.init(traduction)}" update="confirmDeleteForm"
                                                     oncomplete="PF('confirmDeleteTraduction').show();" />
                                </div>
                            </div>
                        </ui:repeat>
                    </h:panelGroup>
                </div>
            </div>

            <!-- gestion des alignments -->
            <div class="card mb-4 py-3 border-left-success" style="margin-top: 20px;">
                <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                    <div class="row">
                        <div class="col-12" style="padding: 5px">
                            <i class="pi pi-align-justify" style="color: #78261f; margin-right: 10px; margin-left: 10px" />
                            <p:commandButton value="#{langueBean.getMsg('alignment.addNewAlignment')}"
                                             update="idAddManualAlignment" process="@this" ajax="true"
                                             oncomplete="PF('addManualAlignment').show();"
                                             actionListener="#{alignmentManualBean.reset()}"
                                             styleClass="rounded-button ui-button-outlined"
                                             style="color: #f47b2a;" />

                            <p:commandButton value="#{langueBean.getMsg('alignment.addNewAutoAlignment')}"
                                             update="tabViewCandidat" process="@this"
                                             actionListener="#{candidatBean.openAddAlignementWindow()}"
                                             styleClass="rounded-button ui-button-outlined"
                                             style="color: #f47b2a; margin-left: 10px" >
                                <p:resetInput target="searchAlignementForm"/>
                            </p:commandButton>
                        </div>
                    </div>

                    <h:panelGroup rendered="#{candidatBean.candidatSelected.alignments.size() == 0}" style="margin-top: 10px">
                        <div class="row">
                            <div class="col-12">
                                <h:outputText  value="#{langueBean.getMsg('rightbody.concept.no_value')} ..." style="color: grey; font-style: italic " />
                            </div>
                        </div>
                    </h:panelGroup>

                    <h:panelGroup id="alignemnts" rendered="#{candidatBean.candidatSelected.alignments.size() > 0}" style="margin-top: 10px">
                        <div class="row" style="font-size: 12px; color: #601e18; margin-bottom: 5px">
                            <div class="col-3" style="margin-top: -2px;">
                                <b><h:outputText value="Type"/></b>
                            </div>
                            <div class="col-5">
                                <b><h:outputText value="#{langueBean.getMsg('rightbody.concept.original_uri')}"/></b>
                            </div>
                            <div class="col-2">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.edit')}"/></b>
                            </div>
                            <div class="col-2">
                                <b><h:outputText value="#{langueBean.getMsg('candidat.remove')}"/></b>
                            </div>
                        </div>

                        <ui:repeat id="listAlignement" var="alignment" value="#{candidatBean.candidatSelected.alignments}">
                            <div class="row" style="background-color: #{viewEditionBean.getAlternateColor(candidatBean.candidatSelected.alignments.indexOf(alignment))}; padding-top: 5px" >
                                <div class="col-3" style="margin-top: -2px;">
                                    <h:outputText value="#{alignment.alignmentLabelType}" style="font-size: 14px;"/>
                                </div>
                                <div class="col-5" style="margin-top: -2px;">
                                    <h:outputText value="#{alignment.uri_target} (#{alignment.thesaurus_target})" style="font-size: 14px;"/>
                                </div>
                                <div class="col-2" style="margin-top: -5px">
                                    <p:commandButton icon="fas fa-pen"
                                                     style="color: #43B572"
                                                     actionListener="#{candidatBean.setAlignementSelected(alignment)}"
                                                     oncomplete="PF('editManualAlignment').show();"
                                                     process="@this" ajax="true"
                                                     update="tabViewCandidat"
                                                     styleClass="rounded-button ui-button-outlined" />
                                </div>

                                <div class="col-2" style="margin-top: -5px">
                                    <p:commandButton icon="pi pi-trash" styleClass="rounded-button ui-button-danger ui-button-outlined"
                                                     actionListener="#{candidatBean.setAlignementSelected(alignment)}"
                                                     update="tabViewCandidat" process="@this" ajax="true"
                                                     oncomplete="PF('confirmDeleteAlignement').show();" />
                                </div>
                            </div>
                        </ui:repeat>
                    </h:panelGroup>
                </div>
            </div>

            <!-- gestion des images -->
            <div class="card mb-4 py-3 border-left-success" style="margin-top: 20px;">
                <div class="list-group" style="margin-top: -10px; margin-bottom: -10px; margin-left: 12px; margin-right: 12px">
                    <div class="row">
                        <div class="col-12">
                            <i class="pi pi-images" style="color: #78261f; margin-right: 10px" />

                            <p:commandButton value="#{langueBean.getMsg('rightbody.concept.add_image')}"
                                             actionListener="#{candidatBean.initImageDialog()}" oncomplete="PF('addImage').show();"
                                             styleClass="rounded-button ui-button-outlined" update="idAddImage"
                                             style="color: #f47b2a;" />

                            <p:commandButton value="#{langueBean.getMsg('candidat.photo.delete')}" ajax="true" process="@this"
                                             oncomplete="PF('deleteImage').show();"
                                             styleClass="rounded-button ui-button-outlined" update="tabViewCandidat"
                                             style="color: #f47b2a; margin-left: 10px" />
                        </div>
                    </div>

                    <h:panelGroup rendered="#{candidatBean.candidatSelected.images.size() == 0}" style="margin-top: 10px">
                        <div class="row">
                            <div class="col-12">
                                <h:outputText  value="#{langueBean.getMsg('rightbody.concept.no_value')}..." style="color: grey; font-style: italic " />
                            </div>
                        </div>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{candidatBean.candidatSelected.images.size() > 0}" style="margin-top: 10px">
                        <div class="row">
                            <div class="col-12">
                                <p:remoteCommand name="rc" actionListener="#{galleriaView.changeActiveIndex}"
                                                 update="tabViewCandidat" oncomplete="PF('galleria').show()" />
                                <p:galleria widgetVar="galleria"
                                            value="#{candidatBean.candidatSelected.images}" var="photo" numVisible="5"
                                            circular="true"
                                            fullScreen="true"
                                            showCaption="true"
                                            showItemNavigators="true"
                                            activeIndex="#{galleriaView.activeIndex}"
                                            responsiveOptions="#{galleriaView.responsiveOptions1}"
                                            style="max-width: 600px;">

                                    <div style="position: relative; width: 100%;">
                                        <!-- Image -->
                                        <p:graphicImage value="#{photo.uri}" alt="#{photo.uri}" style="width: 100%; display: block;" />

                                        <!-- Description -->
                                        <div style="position: absolute; bottom: 0; width: 100%; height: 80px; background-color: rgba(0, 0, 0, 0.5); color: white; padding: 10px">
                                            <div class="row" style="width: 100%; height: 30px;">
                                                <div class="col-10">
                                                    <h4 class="mb-2">
                                                        <a href="#{photo.uri}" target="_blank" style="color: #F7A269;">#{photo.imageName}</a>
                                                    </h4>
                                                </div>
                                                <div class="col-2" style="text-align: right">
                                                    <p:commandButton value="#{langueBean.getMsg('candidat.remove')}" process="@this" ajax="true"
                                                                     update="tabViewCandidat"
                                                                     action="#{candidatBean.deleteImage(photo.uri)}"
                                                                     styleClass="rounded-button ui-button-outlined"
                                                                     style="color: #f47b2a;">
                                                        <p:confirm type="popup" header="#{langueBean.getMsg('profile.confirmation')}" icon="pi pi-info-circle"
                                                                   message="#{langueBean.getMsg('candidat.photo.delete_conform')}"/>
                                                    </p:commandButton>

                                                    <p:confirmPopup global="true" showEffect="fade" hideEffect="fade">
                                                        <p:commandButton value="#{langueBean.getMsg('no')}" type="button" styleClass="ui-confirm-popup-no ui-button-flat"/>
                                                        <p:commandButton value="#{langueBean.getMsg('yes')}" type="button" styleClass="ui-confirm-popup-yes" />
                                                    </p:confirmPopup>
                                                </div>
                                            </div>
                                            <div class="row" style="width: 100%; height: 30px;">
                                                <div class="col-12">
                                                    <i>
                                                        <p:link href="#{not empty photo.uri ? photo.uri : '#'}" value="#{photo.uri} (@#{photo.copyRight} _ #{photo.creator})"
                                                                target="_blank" style="color: white;"/>
                                                    </i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </p:galleria>

                                <div class="row">
                                    <div class="col-12">
                                        <ui:repeat value="#{candidatBean.candidatSelected.images}" var="photo" varStatus="status">
                                            <p:graphicImage value="#{photo.uri}" alt="#{photo.uri}" style="cursor: pointer; max-height: 200px; max-width: 500px; margin-left: 10px;"
                                                            onclick="rc([{'name': 'index', 'value': #{status.index}}])" title="#{photo.uri} (@#{photo.copyRight} _ #{photo.creator})"/>
                                            <f:facet name="caption">
                                                <h4 class="mb-2">#{photo.imageName}</h4>
                                                <i>@#{photo.copyRight} _ #{photo.creator}</i>
                                            </f:facet>

                                        </ui:repeat>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:panelGroup>
                </div>
            </div>

            <ui:include src="candidatDiscussion.xhtml" />
        </h:panelGroup>
    </div>

    <ui:include src="dialog/addAlignmentManual.xhtml" />
    <ui:include src="dialog/deleteAlignment.xhtml" />
    <ui:include src="dialog/editAlignment.xhtml" />
    <ui:include src="dialog/addAlignmentAuto.xhtml" />
    <ui:include src="dialog/deleteImage.xhtml" />
    <ui:include src="dialog/addImage.xhtml" />

</ui:fragment>
