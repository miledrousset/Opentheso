<ui:fragment xmlns="http://www.w3.org/1999/xhtml"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <style type="text/css">

        .formLogin {
            z-index: 1;
            background: #FFFFFF;
            max-width: 360px;
            padding: 45px;
            text-align: center;
        }
        body .ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-icon {
            color: #43B572;
        }
        .formLogin-label {
            font-family: "Roboto", sans-serif;
            font-size: 14px;
            color: #4CAF50;
        }
        .formLogin input {
            font-family: "Roboto", sans-serif;
            outline: 0;
            background: #ecf8f1;
            width: 100%;
            border: 0;
            margin: 0 0 15px;
            padding: 15px;
            box-sizing: border-box;
            font-size: 14px;
        }
        .formLogin-button {
            font-family: "Roboto", sans-serif;
            text-transform: uppercase;
            outline: 0;
            background: #4CAF50;
            width: 100%;
            border: 0;
            padding: 15px;
            color: #FFFFFF;
            font-size: 14px;
            -webkit-transition: all 0.3 ease;
            transition: all 0.3 ease;
            cursor: pointer;
        }
        .formLogin button:hover,.formLogin button:active,.formLogin button:focus {
            background: #43A047;
        }
        .formLogin .message {
            margin: 15px 0 0;
            color: #b3b3b3;
            font-size: 12px;
        }
        .formLogin .message a {
            color: #4CAF50;
            text-decoration: none;
        }
        .formLogin .register-form {
            display: none;
        }
    </style>

    <p:dialog id="idLogin" header="#{langueBean.getMsg('menu.login')}" widgetVar="login" 
              showEffect="fade" modal="true" resizable="false" position="top" style="margin-top: 50px; font-size: 12px;" >

        <div class="formLogin">
            <h:form class="login-form">
                <p:inputText placeholder="username" value="#{currentUser.username}" />
                <p:inputText type="password" placeholder="password" value="#{currentUser.password}"/>
                <p:commandButton value="#{langueBean.getMsg('menu.connect')}" styleClass="ui-button-success" icon="fa-solid fa-key"
                                 ajax="true" action="#{currentUser.login()}" 
                                 update="containerIndex:header containerIndex:notificationProp 
                                 menuBar containerIndex:searchBar containerIndex:contentConcept messageIndex">
                </p:commandButton>

                <p:spacer/>

                <!-- Nouveau bouton Keycloak -->
                <p:button rendered="dd" value="Connexion via Keycloak" icon="fa-brands fa-keycdn" styleClass="ui-button-secondary"
                          onclick="window.location.href='#{loginBean.keycloakUrl}'; return false;" />


                <p class="message">
                    <p:commandLink update="idForgetPass forgetPassForm" oncomplete="PF('forgetPass').show();"
                                   value="#{langueBean.getMsg('menu.forgotten_pass')}" style="font-size: 12px;"/>
                </p>

                <input type="hidden" name="csrfToken" value="${sessionScope.CSRF_TOKEN}" />
            </h:form>
        </div>
    </p:dialog>   
</ui:fragment>
